<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Hyprlandå¾®ä¿¡å¿«æ·é”® | Kevin Feng </title> <meta name="author" content="Kevin Feng"> <meta name="description" content="A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. "> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%91%BF&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://vonwind.github.io/blog/2025/Hyprland%E5%BE%AE%E4%BF%A1%E5%BF%AB%E6%8D%B7%E9%94%AE/"> <script src="/assets/js/theme.js?a81d82887dd692e91686b43de4542f18"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Kevin</span> Feng </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">teaching </a> </li> <li class="nav-item "> <a class="nav-link" href="/people/">people </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">submenus </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/books/">bookshelf</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/blog/">blog</a> </div> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Hyprlandå¾®ä¿¡å¿«æ·é”®</h1> <p class="post-meta"> Created on September 22, 2025 </p> <p class="post-tags"> <a href="/blog/2025"> <i class="fa-solid fa-calendar fa-sm"></i> 2025 </a> Â  Â· Â  <a href="/blog/tag/omarchy"> <i class="fa-solid fa-hashtag fa-sm"></i> omarchy</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <h3 id="è‡ªåŠ¨æ£€æµ‹ç‰ˆè„šæœ¬">è‡ªåŠ¨æ£€æµ‹ç‰ˆè„šæœ¬</h3> <p>ä¿å­˜ä¸º <code class="language-plaintext highlighter-rouge">~/scripts/wechat-toggle.sh</code>ï¼š</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

<span class="c"># è‡ªåŠ¨æ£€æµ‹å¾®ä¿¡çª—å£ class</span>
get_wechat_class<span class="o">()</span> <span class="o">{</span>
    hyprctl clients | <span class="nb">grep</span> <span class="nt">-i</span> <span class="s2">"wechat"</span> | <span class="nb">grep</span> <span class="s2">"class:"</span> | <span class="nb">head</span> <span class="nt">-n1</span> | <span class="nb">awk</span> <span class="s1">'{print $2}'</span>
<span class="o">}</span>

<span class="nv">WIN_CLASS</span><span class="o">=</span><span class="si">$(</span>get_wechat_class<span class="si">)</span>

<span class="c"># å¦‚æœæ²¡æœ‰æ£€æµ‹åˆ°ï¼Œé»˜è®¤ç”¨ wechat</span>
<span class="k">if</span> <span class="o">[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$WIN_CLASS</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nv">WIN_CLASS</span><span class="o">=</span><span class="s2">"wechat"</span>
<span class="k">fi</span>

<span class="c"># æ£€æŸ¥å¾®ä¿¡æ˜¯å¦è¿è¡Œ</span>
<span class="k">if</span> <span class="o">!</span> pgrep <span class="nt">-i</span> wechat <span class="o">&gt;</span>/dev/null<span class="p">;</span> <span class="k">then</span>
    <span class="c"># æ²¡æœ‰è¿è¡Œå°±å¯åŠ¨</span>
    wechat &amp;
    <span class="nb">exit </span>0
<span class="k">fi</span>

<span class="c"># å¾®ä¿¡åœ¨è¿è¡Œï¼Œæ£€æŸ¥çª—å£ä¿¡æ¯</span>
<span class="nv">WIN_INFO</span><span class="o">=</span><span class="si">$(</span>hyprctl clients | <span class="nb">grep</span> <span class="nt">-i</span> <span class="s2">"class: </span><span class="nv">$WIN_CLASS</span><span class="s2">"</span> <span class="nt">-A</span> 10<span class="si">)</span>

<span class="k">if</span> <span class="o">[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$WIN_INFO</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="c"># æ²¡æ‰¾åˆ°çª—å£ï¼ˆå¯èƒ½åœ¨åå°ï¼‰ï¼Œé‡æ–°å¯åŠ¨</span>
    wechat &amp;
    <span class="nb">exit </span>0
<span class="k">fi</span>

<span class="c"># å¦‚æœçª—å£å·²èšç„¦ â†’ æœ€å°åŒ–åˆ°ä¸€ä¸ªéšè— workspace</span>
<span class="k">if </span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$WIN_INFO</span><span class="s2">"</span> | <span class="nb">grep</span> <span class="nt">-q</span> <span class="s2">"focused: yes"</span><span class="p">;</span> <span class="k">then
    </span>hyprctl dispatch movetoworkspacesilent special:hidden <span class="s2">"class:^(?i)</span><span class="nv">$WIN_CLASS</span><span class="s2">$"</span>
<span class="k">else</span>
    <span class="c"># å¦åˆ™èšç„¦åˆ°å®ƒ</span>
    hyprctl dispatch focuswindow <span class="s2">"class:^(?i)</span><span class="nv">$WIN_CLASS</span><span class="s2">$"</span>
<span class="k">fi</span>
</code></pre></div></div> <h3 id="ä½¿ç”¨æ–¹æ³•">ä½¿ç”¨æ–¹æ³•</h3> <ol> <li>ç»™æƒé™ï¼š <div class="language-shell highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nb">chmod</span> +x ~/scripts/wechat-toggle.sh
</code></pre></div> </div> </li> <li>åœ¨ <code class="language-plaintext highlighter-rouge">~/.config/hypr/hyprland.conf</code> é‡Œæ·»åŠ ï¼š <div class="language-shell highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nb">bind</span> <span class="o">=</span> SUPER, W, <span class="nb">exec</span>, ~/scripts/wechat-toggle.sh
</code></pre></div> </div> </li> </ol> <p>è¿™æ ·æ•ˆæœå°±æ˜¯ï¼š</p> <ul> <li> <p><code class="language-plaintext highlighter-rouge">SUPER + W</code></p> <ul> <li> <p>å¦‚æœå¾®ä¿¡æ²¡å¼€ â†’ å¯åŠ¨å¾®ä¿¡</p> </li> <li> <p>å¦‚æœå¾®ä¿¡åœ¨åå° â†’ åˆ‡æ¢åˆ°å‰å°</p> </li> <li> <p>å¦‚æœå¾®ä¿¡å·²åœ¨å‰å° â†’ éšè—åˆ°ä¸€ä¸ª <code class="language-plaintext highlighter-rouge">special:hidden</code> çš„ workspace</p> </li> </ul> </li> </ul> <h2 id="-æ”¹è¿›åçš„-toggle-è„šæœ¬æ”¯æŒè·¨-workspace">ğŸ”¹ æ”¹è¿›åçš„ toggle è„šæœ¬ï¼ˆæ”¯æŒè·¨ workspaceï¼‰</h2> <p>ä¿å­˜ä¸º <code class="language-plaintext highlighter-rouge">~/scripts/toggle-app.sh</code>ï¼š</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="nv">APP</span><span class="o">=</span><span class="nv">$1</span>

<span class="c"># æ£€æŸ¥ç¨‹åºæ˜¯å¦è¿è¡Œ</span>
<span class="k">if</span> <span class="o">!</span> pgrep <span class="nt">-x</span> <span class="s2">"</span><span class="nv">$APP</span><span class="s2">"</span> <span class="o">&gt;</span>/dev/null<span class="p">;</span> <span class="k">then</span>
    <span class="nv">$APP</span> &amp;
    <span class="nb">exit </span>0
<span class="k">fi</span>

<span class="c"># æŸ¥æ‰¾çª—å£ä¿¡æ¯</span>
<span class="nv">WIN_INFO</span><span class="o">=</span><span class="si">$(</span>hyprctl clients | <span class="nb">awk</span> <span class="nt">-v</span> <span class="nv">app</span><span class="o">=</span><span class="s2">"</span><span class="nv">$APP</span><span class="s2">"</span> <span class="s1">'
    BEGIN {IGNORECASE=1}
    /class:/ {cls=$2}
    /workspace:/ {ws=$2}
    /address:/ {addr=$2}
    /focused:/ {f=$2}
    {
      if (tolower(cls)==tolower(app)) {
        print cls, ws, addr, f
      }
    }'</span><span class="si">)</span>

<span class="k">if</span> <span class="o">[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$WIN_INFO</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nv">$APP</span> &amp;
    <span class="nb">exit </span>0
<span class="k">fi</span>

<span class="c"># è§£æç»“æœï¼ˆå–ç¬¬ä¸€ä¸ªåŒ¹é…çª—å£ï¼‰</span>
<span class="nb">read </span>CLS WS ADDR FOCUSED <span class="o">&lt;&lt;&lt;</span> <span class="s2">"</span><span class="nv">$WIN_INFO</span><span class="s2">"</span>

<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$FOCUSED</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"yes"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="c"># å¦‚æœå·²èšç„¦ â†’ éšè—åˆ° special:hidden</span>
    hyprctl dispatch movetoworkspacesilent special:hidden <span class="s2">"class:^(?i)</span><span class="nv">$APP</span><span class="s2">$"</span>
<span class="k">else
    if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$WS</span><span class="s2">"</span> <span class="o">!=</span> <span class="s2">"</span><span class="si">$(</span>hyprctl activeworkspace <span class="nt">-j</span> | jq <span class="nt">-r</span> .id<span class="si">)</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
        <span class="c"># å¦‚æœåœ¨å…¶ä»– workspace â†’ åˆ‡è¿‡å»</span>
        hyprctl dispatch workspace <span class="s2">"</span><span class="nv">$WS</span><span class="s2">"</span>
    <span class="k">fi</span>
    <span class="c"># èšç„¦çª—å£</span>
    hyprctl dispatch focuswindow <span class="s2">"class:^(?i)</span><span class="nv">$APP</span><span class="s2">$"</span>
<span class="k">fi</span>

</code></pre></div></div> <h2 id="-ä½¿ç”¨æ–¹å¼">ğŸ”¹ ä½¿ç”¨æ–¹å¼</h2> <ol> <li>ç»™æ‰§è¡Œæƒé™ï¼š <div class="language-shell highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nb">chmod</span> +x ~/scripts/toggle-app.sh
</code></pre></div> </div> </li> <li>åœ¨ ~/.config/hypr/hyprland.conf é‡Œé…ç½®ï¼š <div class="language-shell highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nb">bind</span> <span class="o">=</span> SUPER, W, <span class="nb">exec</span>, ~/scripts/toggle-app.sh wechat
<span class="nb">bind</span> <span class="o">=</span> SUPER, T, <span class="nb">exec</span>, ~/scripts/toggle-app.sh telegram-desktop
<span class="nb">bind</span> <span class="o">=</span> SUPER, B, <span class="nb">exec</span>, ~/scripts/toggle-app.sh firefox
<span class="nb">bind</span> <span class="o">=</span> SUPER, Return, <span class="nb">exec</span>, ~/scripts/toggle-app.sh kitty
</code></pre></div> </div> </li> </ol> <h2 id="-æ•ˆæœ">ğŸ”¹ æ•ˆæœ</h2> <ul> <li> <p>å¦‚æœæ²¡è¿è¡Œ â†’ å¯åŠ¨</p> </li> <li> <p>å¦‚æœåœ¨å½“å‰ workspace â†’ èšç„¦æˆ–éšè—</p> </li> <li> <p>å¦‚æœåœ¨å…¶ä»– workspace â†’ è‡ªåŠ¨åˆ‡æ¢åˆ°å¯¹åº” workspace å¹¶èšç„¦</p> </li> <li> <p>å†æŒ‰ä¸€æ¬¡ â†’ éšè—åˆ° <code class="language-plaintext highlighter-rouge">special:hidden</code></p> </li> </ul> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$(hyprctl clients | awk -v app="wechat" '
    BEGIN {IGNORECASE=1}
    /class:/ {cls=$2}
    /workspace:/ {ws=$2}
    /address:/ {addr=$2}
    /focused:/ {f=$2}
    {
      if (tolower(cls)==tolower(app)) {
        print cls, ws, addr, f
      }
    }')
    
    
    hyprctl clients -j | jq -r --arg app "wechat" '
    .[] | select(.class | ascii_downcase == ($app | ascii_downcase)) 
    | "\(.class) \(.workspace.id) \(.address)"' | head -n1
    
</code></pre></div></div> <p>æ²¡æœ‰focused</p> <p>å•Šï¼Œæ˜ç™½äº† ğŸ‘ã€‚<br> ä½ åœ¨ <code class="language-plaintext highlighter-rouge">hyprctl clients</code> é‡Œçœ‹åˆ°çš„è¾“å‡ºé‡Œ <strong>æ²¡æœ‰ <code class="language-plaintext highlighter-rouge">focused:</code> å­—æ®µ</strong>ï¼Œè¿™æ˜¯å› ä¸º Hyprland åœ¨ä¸åŒç‰ˆæœ¬é‡Œ <code class="language-plaintext highlighter-rouge">clients</code> çš„è¾“å‡ºæ ¼å¼å˜è¿‡ã€‚</p> <p>æœ‰çš„ç‰ˆæœ¬é‡Œ <code class="language-plaintext highlighter-rouge">hyprctl clients</code> è¾“å‡ºçš„æ˜¯ï¼š</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class: firefox
title: Mozilla Firefox
workspace: 2
address: 0x55d9e6e
at: 1920,30
...
focusHistoryID: 12

</code></pre></div></div> <p>æ²¡æœ‰ <code class="language-plaintext highlighter-rouge">focused: yes/no</code>ã€‚<br> è¦åˆ¤æ–­æŸä¸ªçª—å£æ˜¯ä¸æ˜¯å‰å°ï¼Œå°±è¦<strong>å¯¹æ¯”å®ƒçš„ workspace å’Œå½“å‰æ´»åŠ¨çš„ workspace</strong>ã€‚</p> <h2 id="-æ”¹è¿›ç‰ˆå…¼å®¹æ²¡æœ‰-focused-å­—æ®µçš„æƒ…å†µ">ğŸ”¹ æ”¹è¿›ç‰ˆï¼ˆå…¼å®¹æ²¡æœ‰ <code class="language-plaintext highlighter-rouge">focused</code> å­—æ®µçš„æƒ…å†µï¼‰</h2> <p>æ›´æ–°åçš„ <code class="language-plaintext highlighter-rouge">toggle-app.sh</code>ï¼š</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="nv">APP</span><span class="o">=</span><span class="nv">$1</span>

<span class="c"># æ£€æŸ¥ç¨‹åºæ˜¯å¦è¿è¡Œ</span>
<span class="k">if</span> <span class="o">!</span> pgrep <span class="nt">-x</span> <span class="s2">"</span><span class="nv">$APP</span><span class="s2">"</span> <span class="o">&gt;</span>/dev/null<span class="p">;</span> <span class="k">then</span>
    <span class="nv">$APP</span> &amp;
    <span class="nb">exit </span>0
<span class="k">fi</span>

<span class="c"># å½“å‰ workspace ID</span>
<span class="nv">CUR_WS</span><span class="o">=</span><span class="si">$(</span>hyprctl activeworkspace <span class="nt">-j</span> | jq <span class="nt">-r</span> .id<span class="si">)</span>

<span class="c"># æŸ¥æ‰¾ç¬¬ä¸€ä¸ªåŒ¹é…çš„çª—å£</span>
<span class="nv">WIN_INFO</span><span class="o">=</span><span class="si">$(</span>hyprctl clients <span class="nt">-j</span> | jq <span class="nt">-r</span> <span class="nt">--arg</span> app <span class="s2">"</span><span class="nv">$APP</span><span class="s2">"</span> <span class="s1">'
    .[] | select(.class | ascii_downcase == ($app | ascii_downcase)) 
    | "\(.class) \(.workspace.id) \(.address)"'</span> | <span class="nb">head</span> <span class="nt">-n1</span><span class="si">)</span>

<span class="k">if</span> <span class="o">[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$WIN_INFO</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nv">$APP</span> &amp;
    <span class="nb">exit </span>0
<span class="k">fi

</span><span class="nb">read </span>CLS WS ADDR <span class="o">&lt;&lt;&lt;</span> <span class="s2">"</span><span class="nv">$WIN_INFO</span><span class="s2">"</span>

<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$WS</span><span class="s2">"</span> <span class="nt">-eq</span> <span class="s2">"</span><span class="nv">$CUR_WS</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="c"># å¦‚æœåœ¨å½“å‰ workspace â†’ éšè—åˆ° special:hidden</span>
    hyprctl dispatch movetoworkspacesilent special:hidden <span class="s2">"address:</span><span class="nv">$ADDR</span><span class="s2">"</span>
<span class="k">else</span>
    <span class="c"># å¦‚æœåœ¨å…¶ä»– workspace â†’ åˆ‡æ¢å¹¶èšç„¦</span>
    hyprctl dispatch workspace <span class="s2">"</span><span class="nv">$WS</span><span class="s2">"</span>
    hyprctl dispatch focuswindow <span class="s2">"address:</span><span class="nv">$ADDR</span><span class="s2">"</span>
<span class="k">fi</span>

</code></pre></div></div> <h2 id="-å…³é”®ç‚¹">ğŸ”¹ å…³é”®ç‚¹</h2> <ul> <li> <p>è¿™é‡Œç”¨ <code class="language-plaintext highlighter-rouge">hyprctl clients -j</code>ï¼ˆJSON æ ¼å¼ï¼‰ï¼Œå†ç”¨ <code class="language-plaintext highlighter-rouge">jq</code> è§£æï¼š</p> <ul> <li> <p><code class="language-plaintext highlighter-rouge">.class</code> â†’ åº”ç”¨ç±»å</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">.workspace.id</code> â†’ çª—å£æ‰€åœ¨çš„ workspace</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">.address</code> â†’ çª—å£åœ°å€ï¼ˆå”¯ä¸€ IDï¼‰</p> </li> </ul> </li> <li> <p>åˆ¤æ–­é€»è¾‘æ”¹æˆï¼š</p> <ul> <li> <p><strong>åœ¨å½“å‰ workspace</strong> â†’ éšè—åˆ° <code class="language-plaintext highlighter-rouge">special:hidden</code></p> </li> <li> <p><strong>åœ¨å…¶ä»– workspace</strong> â†’ åˆ‡æ¢è¿‡å»å¹¶èšç„¦</p> </li> </ul> </li> </ul> <h2 id="-é…ç½®æ–¹å¼">ğŸ”¹ é…ç½®æ–¹å¼</h2> <p>åŒæ ·åœ¨ <code class="language-plaintext highlighter-rouge">hyprland.conf</code> é‡Œå†™ï¼š</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">bind</span> <span class="o">=</span> SUPER, W, <span class="nb">exec</span>, ~/scripts/toggle-app.sh wechat
<span class="nb">bind</span> <span class="o">=</span> SUPER, T, <span class="nb">exec</span>, ~/scripts/toggle-app.sh telegram-desktop
<span class="nb">bind</span> <span class="o">=</span> SUPER, B, <span class="nb">exec</span>, ~/scripts/toggle-app.sh firefox

</code></pre></div></div> <p>è¿™æ ·å°±ä¸ä¼šä¾èµ– <code class="language-plaintext highlighter-rouge">focused</code> å­—æ®µäº† âœ…ã€‚</p> <hr> <p>éšè—åå†æ‰“å¼€ ä¸å¹³é“ºçª—å£</p> <p>ğŸ‘Œ ä½ è¯´çš„æƒ…å†µæ˜¯ï¼š<br> è„šæœ¬é‡ŒæŠŠçª—å£ <strong>ç§»åˆ° <code class="language-plaintext highlighter-rouge">special:hidden</code></strong> workspace ä¹‹åï¼Œå†åˆ‡å›æ¥æ—¶ï¼Œçª—å£ä¸æ˜¯å¹³é“ºçŠ¶æ€äº†ï¼ˆæ¯”å¦‚å˜æˆæµ®åŠ¨ã€å°ºå¯¸ä¹±æ‰ï¼‰ã€‚</p> <p>è¿™æ˜¯å› ä¸ºï¼š</p> <ul> <li> <p><code class="language-plaintext highlighter-rouge">special:hidden</code> æœ¬èº«æ˜¯ä¸€ä¸ª <strong>ç‰¹æ®Š workspace</strong>ï¼Œçª—å£åˆ‡è¿›å»åˆ‡å‡ºæ¥æ—¶ï¼ŒHyprland å¯èƒ½ä¼šæ”¹å˜å®ƒçš„ <strong>tiling/floating çŠ¶æ€</strong>ã€‚</p> </li> <li> <p>å¦å¤–ï¼Œ<code class="language-plaintext highlighter-rouge">hyprctl dispatch movetoworkspacesilent</code> æ²¡æœ‰å¼ºåˆ¶ä¿æŒ tilingã€‚</p> </li> </ul> <h2 id="-è§£å†³æ€è·¯">ğŸ”¹ è§£å†³æ€è·¯</h2> <ol> <li> <p><strong>è®°å½•çª—å£åŸæœ¬çš„çŠ¶æ€</strong>ï¼ˆtiling/floatingï¼‰ã€‚</p> </li> <li> <p>éšè—æ—¶ â†’ ç§»åˆ° <code class="language-plaintext highlighter-rouge">special:hidden</code>ã€‚</p> </li> <li> <p>å†æ˜¾ç¤ºæ—¶ â†’ æŠŠå®ƒç§»å›åŸæ¥çš„ workspaceï¼Œå¹¶æ¢å¤ tiling çŠ¶æ€ã€‚</p> </li> </ol> <h2 id="-æ”¹è¿›è„šæœ¬ä¿è¯çª—å£æ¢å¤å¹³é“º">ğŸ”¹ æ”¹è¿›è„šæœ¬ï¼šä¿è¯çª—å£æ¢å¤å¹³é“º</h2> <p>ä¿å­˜ä¸º <code class="language-plaintext highlighter-rouge">~/scripts/toggle-app.sh</code>ï¼š</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="nv">APP</span><span class="o">=</span><span class="nv">$1</span>

<span class="nv">STATE_FILE</span><span class="o">=</span><span class="s2">"/tmp/hypr_toggle_</span><span class="k">${</span><span class="nv">APP</span><span class="k">}</span><span class="s2">.state"</span>

<span class="c"># æ£€æŸ¥ç¨‹åºæ˜¯å¦è¿è¡Œ</span>
<span class="k">if</span> <span class="o">!</span> pgrep <span class="nt">-x</span> <span class="s2">"</span><span class="nv">$APP</span><span class="s2">"</span> <span class="o">&gt;</span>/dev/null<span class="p">;</span> <span class="k">then</span>
    <span class="nv">$APP</span> &amp;
    <span class="nb">exit </span>0
<span class="k">fi

</span><span class="nv">CUR_WS</span><span class="o">=</span><span class="si">$(</span>hyprctl activeworkspace <span class="nt">-j</span> | jq <span class="nt">-r</span> .id<span class="si">)</span>

<span class="c"># æ‰¾çª—å£ä¿¡æ¯</span>
<span class="nv">WIN_INFO</span><span class="o">=</span><span class="si">$(</span>hyprctl clients <span class="nt">-j</span> | jq <span class="nt">-r</span> <span class="nt">--arg</span> app <span class="s2">"</span><span class="nv">$APP</span><span class="s2">"</span> <span class="s1">'
    .[] | select(.class | ascii_downcase == ($app | ascii_downcase))
    | "\(.workspace.id) \(.address) \(.floating)"'</span> | <span class="nb">head</span> <span class="nt">-n1</span><span class="si">)</span>

<span class="k">if</span> <span class="o">[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$WIN_INFO</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nv">$APP</span> &amp;
    <span class="nb">exit </span>0
<span class="k">fi

</span><span class="nb">read </span>WS ADDR FLOATING <span class="o">&lt;&lt;&lt;</span> <span class="s2">"</span><span class="nv">$WIN_INFO</span><span class="s2">"</span>

<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$WS</span><span class="s2">"</span> <span class="nt">-eq</span> <span class="s2">"</span><span class="nv">$CUR_WS</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="c"># å·²åœ¨å½“å‰ workspace â†’ éšè—</span>
    <span class="nb">echo</span> <span class="s2">"</span><span class="nv">$CUR_WS</span><span class="s2"> </span><span class="nv">$FLOATING</span><span class="s2">"</span> <span class="o">&gt;</span> <span class="s2">"</span><span class="nv">$STATE_FILE</span><span class="s2">"</span>
    hyprctl dispatch movetoworkspacesilent special:hidden <span class="s2">"address:</span><span class="nv">$ADDR</span><span class="s2">"</span>
<span class="k">else
    if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$WS</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"special:hidden"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
        <span class="c"># ä»éšè—æ¢å¤ â†’ ç§»å›åŸ workspace</span>
        <span class="k">if</span> <span class="o">[</span> <span class="nt">-f</span> <span class="s2">"</span><span class="nv">$STATE_FILE</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
            </span><span class="nb">read </span>OLD_WS OLD_FLOATING &lt; <span class="s2">"</span><span class="nv">$STATE_FILE</span><span class="s2">"</span>
            hyprctl dispatch movetoworkspacesilent <span class="s2">"</span><span class="nv">$OLD_WS</span><span class="s2">"</span> <span class="s2">"address:</span><span class="nv">$ADDR</span><span class="s2">"</span>
            <span class="c"># æ¢å¤ tiling çŠ¶æ€</span>
            <span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$OLD_FLOATING</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"false"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
                </span>hyprctl dispatch toggletiling <span class="s2">"address:</span><span class="nv">$ADDR</span><span class="s2">"</span>
            <span class="k">fi
            </span><span class="nb">rm</span> <span class="s2">"</span><span class="nv">$STATE_FILE</span><span class="s2">"</span>
        <span class="k">else
            </span>hyprctl dispatch movetoworkspacesilent <span class="s2">"</span><span class="nv">$CUR_WS</span><span class="s2">"</span> <span class="s2">"address:</span><span class="nv">$ADDR</span><span class="s2">"</span>
        <span class="k">fi
    else</span>
        <span class="c"># åœ¨å…¶ä»– workspace â†’ åˆ‡è¿‡å»å¹¶èšç„¦</span>
        hyprctl dispatch workspace <span class="s2">"</span><span class="nv">$WS</span><span class="s2">"</span>
        hyprctl dispatch focuswindow <span class="s2">"address:</span><span class="nv">$ADDR</span><span class="s2">"</span>
    <span class="k">fi
fi</span>

</code></pre></div></div> <h2 id="-é€»è¾‘è¯´æ˜">ğŸ”¹ é€»è¾‘è¯´æ˜</h2> <ul> <li> <p>ç¬¬ä¸€æ¬¡éšè—æ—¶ â†’ æŠŠ <strong>åŸ workspace + æ˜¯å¦æµ®åŠ¨</strong> å†™åˆ° <code class="language-plaintext highlighter-rouge">/tmp/hypr_toggle_APP.state</code>ã€‚</p> </li> <li> <p>å†æ¬¡åˆ‡æ¢æ—¶ â†’ å¦‚æœçª—å£åœ¨ <code class="language-plaintext highlighter-rouge">special:hidden</code>ï¼Œå°±ï¼š</p> <ol> <li> <p>ç§»å›åŸ workspace</p> </li> <li> <p>å¦‚æœä¹‹å‰æ˜¯ tiling â†’ å¼ºåˆ¶ <code class="language-plaintext highlighter-rouge">toggletiling</code>ï¼Œä¿è¯ä¸æ˜¯æµ®åŠ¨ã€‚</p> </li> </ol> </li> </ul> <p>è¿™æ ·ä½ å°±èƒ½åšåˆ°ï¼š</p> <ul> <li> <p><strong>æŒ‰å¿«æ·é”® â†’ éšè—</strong>ï¼ˆç§»åˆ° hiddenï¼‰</p> </li> <li> <p><strong>å†æŒ‰ä¸€æ¬¡ â†’ æ¢å¤åˆ°åŸ workspaceï¼Œå¹¶ä¿æŒå¹³é“º</strong></p> </li> </ul> <p>++++++++++++++++++++++++++++++++++++++++++++++++++++</p> <p>è¿™æ ·æ”¹éƒ½ä¸èƒ½éšè—äº†</p> <p>Thought for 1m 13s</p> <p>å¥½â€”â€”æ²¡å…³ç³»ï¼Œæˆ‘ä»¬ä¸€æ­¥æ­¥æŠŠå®ƒä¿®å¥½ã€‚ä½ è¯´â€œè¿™æ ·æ”¹éƒ½ä¸èƒ½éšè—äº†â€ï¼Œ<strong>æœ€å¸¸è§çš„åŸå› </strong>æœ‰ä¸¤æ¡ï¼Œæˆ‘å…ˆæŠŠåŸå› è¯´æ¸…æ¥šå†ç»™ä½ ä¸€ä¸ªå®æˆ˜å¯ç”¨çš„è„šæœ¬ï¼ˆå«è°ƒè¯•æ—¥å¿—ã€å›é€€ç­–ç•¥ï¼‰ï¼Œä½ ç›´æ¥æ›¿æ¢è¯•ä¸€ä¸‹ï¼š</p> <p>åŸå› æ€»ç»“ï¼ˆç®€çŸ­ï¼‰</p> <ul> <li> <p><code class="language-plaintext highlighter-rouge">movetoworkspacesilent</code> + <code class="language-plaintext highlighter-rouge">special</code> çš„ç»„åˆåœ¨ä¸åŒ Hyprland ç‰ˆæœ¬/å®ç°ä¸Šè¡Œä¸ºä¸ç¨³å®šæˆ–æœªå®Œå…¨æ”¯æŒï¼Œç¤¾åŒºé‡Œæœ‰ç›¸å…³ reportï¼ˆæ‰€ä»¥ç›´æ¥ç”¨ <code class="language-plaintext highlighter-rouge">movetoworkspacesilent "special,..."</code> å¯èƒ½æ²¡ä½œç”¨ï¼‰ã€‚<a href="https://github.com/hyprwm/Hyprland/issues/1452?utm_source=chatgpt.com" rel="external nofollow noopener" target="_blank">GitHub</a></p> </li> <li> <p>Special workspace æœ¬èº«æœ‰ä¸€äº›é™åˆ¶ï¼ˆä¾‹å¦‚ special çš„æµ®åŠ¨/tiling è¡Œä¸ºå’Œæ™®é€š workspace ä¸å®Œå…¨ä¸€æ ·ï¼‰ï¼Œwindow åœ¨ special ä¸æ¢å¤æ—¶çŠ¶æ€ä¼šè¢« compositor æ”¹å˜ã€‚æ–‡æ¡£ä¹ŸæŒ‡å‡º special çš„è¡Œä¸ºä¸æ™®é€š workspace ä¸åŒã€‚<a href="https://wiki.hypr.land/0.18.0beta/Configuring/Dispatchers/?utm_source=chatgpt.com" rel="external nofollow noopener" target="_blank">Hyprland Wiki</a></p> </li> </ul> <p>å› æ­¤æˆ‘ä»¬è¦åšä¸¤ä»¶äº‹ï¼š</p> <ol> <li> <p>æŠŠéšè—é€»è¾‘åšå¾—æ›´<strong>ç¨³å¥</strong>ï¼ˆå…ˆå°è¯•æœ€ä¼˜ APIï¼Œå¤±è´¥å°±é™çº§åˆ°å¯é çš„ workaroundï¼‰ï¼›</p> </li> <li> <p>å›æ˜¾ï¼ˆæ¢å¤ï¼‰æ—¶<strong>æ˜ç¡®ç”¨ <code class="language-plaintext highlighter-rouge">address:</code> æŒ‡å®šçª—å£</strong>å¹¶åœ¨å¿…è¦æ—¶åšäºŒæ¬¡æ¢å¤ï¼ˆé˜²æ­¢è¢«åŠ¨æˆæµ®åŠ¨ï¼‰ã€‚</p> </li> </ol> <h1 id="æ¨èè„šæœ¬å¸¦è°ƒè¯•--å›é€€">æ¨èè„šæœ¬ï¼ˆå¸¦è°ƒè¯• + å›é€€ï¼‰</h1> <p>æŠŠä¸‹é¢ä¿å­˜ä¸º <code class="language-plaintext highlighter-rouge">~/scripts/wechat-toggle.sh</code>ï¼ˆæˆ–ä½ åŸæ¥çš„è„šæœ¬åï¼‰ï¼Œå¹¶ <code class="language-plaintext highlighter-rouge">chmod +x</code>ã€‚è¿™ä¸ªè„šæœ¬ä¼šè®°å½•æ—¥å¿— <code class="language-plaintext highlighter-rouge">/tmp/hypr_toggle_debug.log</code>ï¼Œå¹¶å°è¯•å¤šç§æ–¹å¼æ¥éšè—/æ¢å¤ï¼ˆå…ˆè¯• silentï¼Œå¤±è´¥å°±ç”¨ movetoworkspace+åˆ‡å› çš„ fallbackï¼‰ï¼š</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/usr/bin/env bash</span>
<span class="nb">set</span> <span class="nt">-euo</span> pipefail
<span class="nv">APP</span><span class="o">=</span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span>
<span class="nv">STATE_DIR</span><span class="o">=</span><span class="s2">"/tmp/hypr_toggle_states"</span>
<span class="nv">LOG</span><span class="o">=</span><span class="s2">"/tmp/hypr_toggle_debug.log"</span>
<span class="nb">mkdir</span> <span class="nt">-p</span> <span class="s2">"</span><span class="nv">$STATE_DIR</span><span class="s2">"</span>
: <span class="o">&gt;</span><span class="s2">"</span><span class="nv">$LOG</span><span class="s2">"</span>

dbg<span class="o">(){</span> <span class="nb">echo</span> <span class="s2">"</span><span class="si">$(</span><span class="nb">date</span> +%T<span class="si">)</span><span class="s2"> </span><span class="nv">$*</span><span class="s2">"</span> <span class="o">&gt;&gt;</span><span class="s2">"</span><span class="nv">$LOG</span><span class="s2">"</span><span class="p">;</span> <span class="o">}</span>

<span class="c"># find first matching window's address</span>
<span class="nv">WIN_JSON</span><span class="o">=</span><span class="si">$(</span>hyprctl clients <span class="nt">-j</span> 2&gt;/dev/null <span class="o">||</span> <span class="nb">echo</span> <span class="s2">"[]"</span><span class="si">)</span>
<span class="nv">ADDR</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$WIN_JSON</span><span class="s2">"</span> | jq <span class="nt">-r</span> <span class="nt">--arg</span> app <span class="s2">"</span><span class="nv">$APP</span><span class="s2">"</span> <span class="s1">'
  .[] | select((.class // "" | ascii_downcase) == ($app|ascii_downcase)) | .address'</span> | <span class="nb">head</span> <span class="nt">-n1</span> <span class="o">||</span> <span class="nb">true</span><span class="si">)</span>

<span class="k">if</span> <span class="o">[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$ADDR</span><span class="s2">"</span> <span class="o">]</span> <span class="o">||</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$ADDR</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"null"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
  </span>dbg <span class="s2">"No running window for '</span><span class="nv">$APP</span><span class="s2">' found. Starting it."</span>
  <span class="c"># ä¿®æ”¹ä¸ºä½ çš„å¯åŠ¨å‘½ä»¤ï¼ˆå¦‚æœå¯æ‰§è¡Œåä¸åŒï¼‰</span>
  <span class="nv">$APP</span> &amp; <span class="nb">disown
  exit </span>0
<span class="k">fi</span>

<span class="c"># workspace ids and names</span>
<span class="nv">WIN_WS</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$WIN_JSON</span><span class="s2">"</span> | jq <span class="nt">-r</span> <span class="nt">--arg</span> addr <span class="s2">"</span><span class="nv">$ADDR</span><span class="s2">"</span> <span class="s1">'.[] | select(.address==$addr) | (.workspace.id // "-1")'</span> <span class="si">)</span>
<span class="nv">WIN_WS_NAME</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$WIN_JSON</span><span class="s2">"</span> | jq <span class="nt">-r</span> <span class="nt">--arg</span> addr <span class="s2">"</span><span class="nv">$ADDR</span><span class="s2">"</span> <span class="s1">'.[] | select(.address==$addr) | (.workspace.name // "")'</span> <span class="si">)</span>
<span class="nv">CUR_WS</span><span class="o">=</span><span class="si">$(</span>hyprctl activeworkspace <span class="nt">-j</span> | jq <span class="nt">-r</span> .id<span class="si">)</span>

dbg <span class="s2">"Found </span><span class="nv">$APP</span><span class="s2"> addr=</span><span class="nv">$ADDR</span><span class="s2"> ws=</span><span class="nv">$WIN_WS</span><span class="s2"> ws_name='</span><span class="nv">$WIN_WS_NAME</span><span class="s2">' cur_ws=</span><span class="nv">$CUR_WS</span><span class="s2">"</span>

<span class="nv">STATE_FILE</span><span class="o">=</span><span class="s2">"</span><span class="nv">$STATE_DIR</span><span class="s2">/</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">.state"</span>

<span class="c"># Helper to re-query where the window is now</span>
where_is<span class="o">()</span> <span class="o">{</span>
  hyprctl clients <span class="nt">-j</span> | jq <span class="nt">-r</span> <span class="nt">--arg</span> addr <span class="s2">"</span><span class="nv">$ADDR</span><span class="s2">"</span> <span class="s1">'.[] | select(.address==$addr) | (.workspace.id // "-1")'</span> <span class="o">||</span> <span class="nb">echo</span> <span class="s2">"-1"</span>
<span class="o">}</span>

<span class="c"># 1) å¦‚æœçª—å£åœ¨å½“å‰ workspace -&gt; éšè—ï¼ˆmove to specialï¼‰</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$WIN_WS</span><span class="s2">"</span> <span class="nt">-eq</span> <span class="s2">"</span><span class="nv">$CUR_WS</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
  </span>dbg <span class="s2">"Attempting to hide (current ws)"</span>
  <span class="c"># ä¿å­˜åŸ workspace åˆ°çŠ¶æ€æ–‡ä»¶ï¼Œä¾¿äºæ¢å¤</span>
  <span class="nb">echo</span> <span class="s2">"</span><span class="nv">$CUR_WS</span><span class="s2">"</span> <span class="o">&gt;</span> <span class="s2">"</span><span class="nv">$STATE_FILE</span><span class="s2">"</span>

  <span class="c"># å°è¯• 1: movetoworkspacesilent special,address:ADDR ï¼ˆä¼˜é›…ä½†å¯èƒ½ä¸æ”¯æŒ specialï¼‰</span>
  <span class="k">if </span>hyprctl dispatch movetoworkspacesilent <span class="s2">"special,address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span> <span class="o">&gt;</span>/dev/null 2&gt;&amp;1<span class="p">;</span> <span class="k">then
    </span><span class="nb">sleep </span>0.05
    <span class="nv">NEWWS</span><span class="o">=</span><span class="si">$(</span>where_is<span class="si">)</span>
    <span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$NEWWS</span><span class="s2">"</span> <span class="o">!=</span> <span class="s2">"</span><span class="nv">$CUR_WS</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
      </span>dbg <span class="s2">"Hidden via movetoworkspacesilent to ws=</span><span class="nv">$NEWWS</span><span class="s2">"</span>
      <span class="nb">exit </span>0
    <span class="k">fi
    </span>dbg <span class="s2">"movetoworkspacesilent didn't move the window (no-op)."</span>
  <span class="k">else
    </span>dbg <span class="s2">"movetoworkspacesilent returned non-zero or errored."</span>
  <span class="k">fi</span>

  <span class="c"># å›é€€æ–¹æ¡ˆï¼ˆå¯é ï¼‰ï¼šmovetoworkspace special (ä¼šåˆ‡åˆ° special)ï¼Œå†åˆ‡å›åŸ workspace</span>
  dbg <span class="s2">"Fallback: movetoworkspace special + switch back to </span><span class="nv">$CUR_WS</span><span class="s2">"</span>
  hyprctl dispatch movetoworkspace <span class="s2">"special,address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span>
  <span class="c"># åˆ‡å›ä¹‹å‰çš„ workspaceï¼ˆè¿™æ ·ç”¨æˆ·æ„Ÿè§‰æ²¡æœ‰åˆ‡æ¢åˆ° specialï¼‰</span>
  hyprctl dispatch workspace <span class="s2">"</span><span class="nv">$CUR_WS</span><span class="s2">"</span>
  <span class="nb">sleep </span>0.05
  <span class="nv">NEWWS</span><span class="o">=</span><span class="si">$(</span>where_is<span class="si">)</span>
  dbg <span class="s2">"After fallback, window ws=</span><span class="nv">$NEWWS</span><span class="s2">"</span>
  <span class="nb">exit </span>0
<span class="k">fi</span>

<span class="c"># 2) å¦‚æœçª—å£ä¸åœ¨å½“å‰ workspace</span>
<span class="c"># æ£€æŸ¥æ˜¯å¦åœ¨ specialï¼ˆåˆ¤æ–­ workspace åæˆ–ç‰¹æ®Š idï¼‰</span>
<span class="nv">IS_SPECIAL</span><span class="o">=</span><span class="nb">false</span>
<span class="c"># æœ‰äº› hyprctl ç‰ˆæœ¬ä¼šåœ¨ .workspace.name / .workspace.special æä¾›ä¿¡æ¯ï¼›æˆ‘ä»¬å°½é‡å®¹é”™åˆ¤æ–­</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$WIN_WS</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"-1"</span> <span class="o">]</span> <span class="o">||</span> <span class="nb">echo</span> <span class="s2">"</span><span class="nv">$WIN_WS_NAME</span><span class="s2">"</span> | <span class="nb">grep</span> <span class="nt">-qi</span> <span class="s2">"special"</span><span class="p">;</span> <span class="k">then
  </span><span class="nv">IS_SPECIAL</span><span class="o">=</span><span class="nb">true
</span><span class="k">fi

if</span> <span class="nv">$IS_SPECIAL</span><span class="p">;</span> <span class="k">then
  </span>dbg <span class="s2">"Window appears to be in special workspace -&gt; restoring"</span>

  <span class="c"># è¯»å–ä¹‹å‰ä¿å­˜çš„åŸ workspaceï¼ˆæ²¡æœ‰å°±ç”¨å½“å‰ï¼‰</span>
  <span class="k">if</span> <span class="o">[</span> <span class="nt">-f</span> <span class="s2">"</span><span class="nv">$STATE_FILE</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nv">OLD_WS</span><span class="o">=</span><span class="si">$(</span><span class="nb">cat</span> <span class="s2">"</span><span class="nv">$STATE_FILE</span><span class="s2">"</span><span class="si">)</span>
  <span class="k">else
    </span><span class="nv">OLD_WS</span><span class="o">=</span><span class="s2">"</span><span class="nv">$CUR_WS</span><span class="s2">"</span>
  <span class="k">fi

  </span>dbg <span class="s2">"Trying movetoworkspacesilent back to </span><span class="nv">$OLD_WS</span><span class="s2">"</span>
  <span class="k">if </span>hyprctl dispatch movetoworkspacesilent <span class="s2">"</span><span class="k">${</span><span class="nv">OLD_WS</span><span class="k">}</span><span class="s2">,address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span> <span class="o">&gt;</span>/dev/null 2&gt;&amp;1<span class="p">;</span> <span class="k">then
    </span><span class="nb">sleep </span>0.05
    hyprctl dispatch workspace <span class="s2">"</span><span class="nv">$OLD_WS</span><span class="s2">"</span>
    hyprctl dispatch focuswindow <span class="s2">"address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span>
    <span class="nb">rm</span> <span class="nt">-f</span> <span class="s2">"</span><span class="nv">$STATE_FILE</span><span class="s2">"</span>
    dbg <span class="s2">"Restored via movetoworkspacesilent to </span><span class="nv">$OLD_WS</span><span class="s2">"</span>
    <span class="nb">exit </span>0
  <span class="k">fi

  </span>dbg <span class="s2">"Fallback restore: toggling special/showing + movetoworkspace back"</span>
  <span class="c"># best-effort fallback: show special, then move the window back (some versions require non-silent)</span>
  hyprctl dispatch togglespecialworkspace __TEMP <span class="o">||</span> <span class="nb">true
  </span>hyprctl dispatch togglespecialworkspace __TEMP <span class="o">||</span> <span class="nb">true
  </span>hyprctl dispatch movetoworkspace <span class="s2">"</span><span class="k">${</span><span class="nv">OLD_WS</span><span class="k">}</span><span class="s2">,address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span> <span class="o">||</span> <span class="nb">true
  </span>hyprctl dispatch workspace <span class="s2">"</span><span class="nv">$OLD_WS</span><span class="s2">"</span>
  hyprctl dispatch focuswindow <span class="s2">"address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span> <span class="o">||</span> <span class="nb">true
  rm</span> <span class="nt">-f</span> <span class="s2">"</span><span class="nv">$STATE_FILE</span><span class="s2">"</span>
  dbg <span class="s2">"Fallback restore attempted."</span>
  <span class="nb">exit </span>0
<span class="k">fi</span>

<span class="c"># æœ€åï¼šçª—å£åœ¨åˆ«çš„æ™®é€š workspace -&gt; ç›´æ¥åˆ‡è¿‡å»å¹¶ focus</span>
dbg <span class="s2">"Window in other workspace (</span><span class="nv">$WIN_WS</span><span class="s2">) -&gt; switch and focus"</span>
hyprctl dispatch workspace <span class="s2">"</span><span class="nv">$WIN_WS</span><span class="s2">"</span>
hyprctl dispatch focuswindow <span class="s2">"address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">exit </span>0

</code></pre></div></div> <h1 id="ä½ è¦åšçš„å¿«é€Ÿ">ä½ è¦åšçš„ï¼ˆå¿«é€Ÿï¼‰</h1> <ol> <li> <p>æŠŠè„šæœ¬ä¿å­˜å¹¶ <code class="language-plaintext highlighter-rouge">chmod +x ~/scripts/wechat-toggle.sh</code>ã€‚</p> </li> <li> <p>åœ¨ <code class="language-plaintext highlighter-rouge">hyprland.conf</code> é‡Œç»‘å®šï¼ˆä¾‹ï¼‰ï¼š ``` bind = SUPER, W, exec, ~/scripts/wechat-toggle.sh wechat</p> </li> </ol> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
3. è§¦å‘ä¸€æ¬¡éšè—å’Œæ¢å¤ï¼Œè‹¥**è¿˜ä¸èƒ½éšè—**ï¼ŒæŠŠè¿™ä¸¤ä¸ªå‘½ä»¤çš„è¾“å‡ºè´´ä¸Šæ¥ï¼ˆæˆ‘ç›´æ¥çœ‹æ—¥å¿—å’ŒçŠ¶æ€ï¼‰ï¼š
```shell
cat /tmp/hypr_toggle_debug.log
hyprctl clients -j | jq '.[] | {class: .class, address: .address, ws: .workspace.id, name: .workspace.name, floating: .floating}'
hyprctl activeworkspace -j

</code></pre></div></div> <p>ï¼ˆæŠŠè¾“å‡ºç›´æ¥å¤åˆ¶ç²˜è´´åˆ°èŠå¤©çª—å£å°±è¡Œï¼‰</p> <h1 id="å…¶ä»–æ³¨æ„ç‚¹å¸¸è§å‘">å…¶ä»–æ³¨æ„ç‚¹ï¼ˆå¸¸è§å‘ï¼‰</h1> <ul> <li> <p><code class="language-plaintext highlighter-rouge">jq</code> å¿…é¡»å®‰è£…ï¼›è„šæœ¬ç”¨äº† <code class="language-plaintext highlighter-rouge">hyprctl clients -j</code> çš„ JSON è¾“å‡ºæ¥ç²¾ç¡®å®šä½çª—å£ã€‚</p> </li> <li> <p>æœ‰äº› Hyprland ç‰ˆæœ¬å¯¹ <code class="language-plaintext highlighter-rouge">movetoworkspacesilent</code>ï¼ˆå°¤å…¶è·Ÿ special é…åˆï¼‰è¡Œä¸ºä¸ä¸€è‡´ï¼›è„šæœ¬é‡Œåšäº†å›é€€ï¼ˆå…ˆè¯• silentï¼Œå†ç”¨ movetoworkspace + åˆ‡å›ï¼‰ã€‚æ–‡æ¡£å’Œ issue éƒ½æœ‰ç›¸å…³æåˆ°ã€‚<a href="https://wiki.hypr.land/0.18.0beta/Configuring/Dispatchers/?utm_source=chatgpt.com" rel="external nofollow noopener" target="_blank">Hyprland Wiki+1</a></p> </li> <li> <p>special workspace å¯¹æµ®åŠ¨/tiling çš„å¤„ç†æœ‰ç‰¹åˆ«è§„åˆ™ï¼ˆå¯èƒ½å¯¼è‡´çª—å£åœ¨ special é‡Œä¸èƒ½æ˜¯æµ®åŠ¨ï¼‰ï¼Œå› æ­¤æ¢å¤æ—¶éœ€è¦æ˜ç¡® <code class="language-plaintext highlighter-rouge">movetoworkspace &lt;ws&gt;,address:...</code> æˆ–è€… focus åç”¨ <code class="language-plaintext highlighter-rouge">settiled</code>/<code class="language-plaintext highlighter-rouge">setfloating</code>ï¼ˆè¿™äº› dispatcher åœ¨ä½ çš„ hyprland ç‰ˆæœ¬é‡Œæ˜¯å¦å¯ç”¨è¯·æ£€æŸ¥ï¼‰</p> </li> </ul> <p>å…ˆæŠŠä¸Šé¢çš„è„šæœ¬è·‘ä¸€ä¸‹ï¼Œç„¶åæŠŠ <code class="language-plaintext highlighter-rouge">/tmp/hypr_toggle_debug.log</code> å’Œ <code class="language-plaintext highlighter-rouge">hyprctl clients -j | jq ...</code> çš„è¾“å‡ºè´´ä¸Šæ¥ã€‚æˆ‘ä¼šåŸºäºçœŸå®è¾“å‡ºåšé’ˆå¯¹æ€§ä¿®æ­£ï¼ˆé€šå¸¸é—®é¢˜å°±æ˜¯ â€œmovetoworkspacesilent + special ä¸ç”Ÿæ•ˆâ€ æˆ– â€œwindow spec æ²¡å†™æˆ address:â€¦â€ ä¸¤ç±»ä¹‹ä¸€ï¼‰ã€‚</p> <p>+++++++++++++++++++++++++++++++++++++++++++++++++</p> <p>ç°åœ¨å¯ä»¥äº†</p> <h6 id="chatgpt-said">ChatGPT said:</h6> <p>å¤ªå¥½äº† ğŸ‰ï¼é‚£å°±è¯´æ˜ä¹‹å‰çš„é—®é¢˜ç¡®å®æ˜¯ Hyprland çš„ <code class="language-plaintext highlighter-rouge">special</code> + <code class="language-plaintext highlighter-rouge">movetoworkspacesilent</code> è¡Œä¸ºä¸ä¸€è‡´å¯¼è‡´çš„ï¼Œç°åœ¨ç”¨å¸¦å›é€€é€»è¾‘çš„è„šæœ¬å°±ç¨³ä½äº†ã€‚</p> <p>æ€»ç»“ä¸€ä¸‹ä½ ç°åœ¨çš„æ–¹æ¡ˆï¼š</p> <ul> <li> <p><strong>éšè—</strong>ï¼šçª—å£ä»å½“å‰ workspace ç§»åˆ° <code class="language-plaintext highlighter-rouge">special</code>ï¼ŒåŒæ—¶ä¿æŒä½ åŸæœ¬çš„ workspace ä¸åˆ‡æ¢ã€‚</p> </li> <li> <p><strong>æ¢å¤</strong>ï¼šæ ¹æ®ä¿å­˜çš„çŠ¶æ€æŠŠçª—å£ç§»å›åŸ workspaceï¼Œå¹¶è‡ªåŠ¨èšç„¦ã€‚</p> </li> <li> <p><strong>å¯é æ€§</strong>ï¼šåŠ äº†å›é€€é€»è¾‘ï¼Œå°±ç®—æŸäº› Hyprland ç‰ˆæœ¬å¯¹ <code class="language-plaintext highlighter-rouge">movetoworkspacesilent special,...</code> ä¸æ”¯æŒï¼Œä¹Ÿèƒ½é  fallback æ­£å¸¸å·¥ä½œã€‚</p> </li> </ul> <p>è¦ä¸è¦æˆ‘å†å¸®ä½ æ•´ç†ä¸€ä¸ªæ›´<strong>ç²¾ç®€ç‰ˆ</strong>çš„è„šæœ¬ï¼ˆå»æ‰ debug å’Œå¤šä½™åˆ†æ”¯ï¼Œæ–¹ä¾¿é•¿æœŸä½¿ç”¨ï¼‰ï¼Œè¿˜æ˜¯ä¿ç•™ç°åœ¨è¿™ä¸ªå¸¦æ—¥å¿—çš„ç‰ˆæœ¬ï¼ˆæ–¹ä¾¿ä»¥åå‡ºé—®é¢˜æ—¶æ’æŸ¥ï¼‰ï¼Ÿ</p> <p>å¥½çš„</p> <p>ğŸ‘Œ é‚£æˆ‘å¸®ä½ æ•´ç†ä¸€ä¸ª <strong>ç²¾ç®€ç¨³å®šç‰ˆ</strong> è„šæœ¬ï¼Œä¿ç•™æ ¸å¿ƒé€»è¾‘ï¼ŒæŠŠè°ƒè¯•æ—¥å¿—å»æ‰ï¼Œæ–¹ä¾¿æ—¥å¸¸ä½¿ç”¨ã€‚</p> <p>ä¿å­˜ä¸º <code class="language-plaintext highlighter-rouge">~/scripts/toggle-app.sh</code> å¹¶ <code class="language-plaintext highlighter-rouge">chmod +x</code>ï¼š</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/usr/bin/env bash</span>
<span class="nb">set</span> <span class="nt">-euo</span> pipefail

<span class="nv">APP</span><span class="o">=</span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span>
<span class="nv">STATE_DIR</span><span class="o">=</span><span class="s2">"/tmp/hypr_toggle_states"</span>
<span class="nb">mkdir</span> <span class="nt">-p</span> <span class="s2">"</span><span class="nv">$STATE_DIR</span><span class="s2">"</span>

<span class="c"># æ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…çª—å£</span>
<span class="nv">WIN_JSON</span><span class="o">=</span><span class="si">$(</span>hyprctl clients <span class="nt">-j</span><span class="si">)</span>
<span class="nv">ADDR</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$WIN_JSON</span><span class="s2">"</span> | jq <span class="nt">-r</span> <span class="nt">--arg</span> app <span class="s2">"</span><span class="nv">$APP</span><span class="s2">"</span> <span class="s1">'
  .[] | select((.class // "" | ascii_downcase) == ($app|ascii_downcase)) | .address'</span> | <span class="nb">head</span> <span class="nt">-n1</span><span class="si">)</span>

<span class="k">if</span> <span class="o">[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$ADDR</span><span class="s2">"</span> <span class="o">]</span> <span class="o">||</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$ADDR</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"null"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
  <span class="c"># æ²¡æ‰¾åˆ°å°±å¯åŠ¨åº”ç”¨ï¼ˆæŒ‰éœ€æ”¹ä¸ºä½ çš„å¯åŠ¨å‘½ä»¤ï¼‰</span>
  <span class="nv">$APP</span> &amp; <span class="nb">disown
  exit </span>0
<span class="k">fi

</span><span class="nv">WIN_WS</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$WIN_JSON</span><span class="s2">"</span> | jq <span class="nt">-r</span> <span class="nt">--arg</span> addr <span class="s2">"</span><span class="nv">$ADDR</span><span class="s2">"</span> <span class="s1">'.[] | select(.address==$addr) | .workspace.id'</span><span class="si">)</span>
<span class="nv">CUR_WS</span><span class="o">=</span><span class="si">$(</span>hyprctl activeworkspace <span class="nt">-j</span> | jq <span class="nt">-r</span> .id<span class="si">)</span>
<span class="nv">STATE_FILE</span><span class="o">=</span><span class="s2">"</span><span class="nv">$STATE_DIR</span><span class="s2">/</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">.state"</span>

<span class="c"># helper: ç¡®è®¤çª—å£ç°åœ¨åœ¨å“ªä¸ª workspace</span>
where_is<span class="o">()</span> <span class="o">{</span>
  hyprctl clients <span class="nt">-j</span> | jq <span class="nt">-r</span> <span class="nt">--arg</span> addr <span class="s2">"</span><span class="nv">$ADDR</span><span class="s2">"</span> <span class="s1">'.[] | select(.address==$addr) | (.workspace.id // "-1")'</span>
<span class="o">}</span>

<span class="c"># å¦‚æœçª—å£åœ¨å½“å‰ workspace -&gt; éšè—</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$WIN_WS</span><span class="s2">"</span> <span class="nt">-eq</span> <span class="s2">"</span><span class="nv">$CUR_WS</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
  </span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$CUR_WS</span><span class="s2">"</span> <span class="o">&gt;</span> <span class="s2">"</span><span class="nv">$STATE_FILE</span><span class="s2">"</span>

  <span class="c"># ä¼˜å…ˆ silent æ–¹æ³•</span>
  <span class="k">if </span>hyprctl dispatch movetoworkspacesilent <span class="s2">"special,address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span> <span class="o">&gt;</span>/dev/null 2&gt;&amp;1<span class="p">;</span> <span class="k">then
    </span><span class="nb">exit </span>0
  <span class="k">fi</span>

  <span class="c"># å›é€€ï¼šmovetoworkspace specialï¼Œç„¶ååˆ‡å›åŸ ws</span>
  hyprctl dispatch movetoworkspace <span class="s2">"special,address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span>
  hyprctl dispatch workspace <span class="s2">"</span><span class="nv">$CUR_WS</span><span class="s2">"</span>
  <span class="nb">exit </span>0
<span class="k">fi</span>

<span class="c"># å¦‚æœçª—å£åœ¨ special -&gt; æ¢å¤</span>
<span class="nv">WIN_WS_NAME</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$WIN_JSON</span><span class="s2">"</span> | jq <span class="nt">-r</span> <span class="nt">--arg</span> addr <span class="s2">"</span><span class="nv">$ADDR</span><span class="s2">"</span> <span class="s1">'.[] | select(.address==$addr) | (.workspace.name // "")'</span><span class="si">)</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$WIN_WS</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"-1"</span> <span class="o">]</span> <span class="o">||</span> <span class="nb">echo</span> <span class="s2">"</span><span class="nv">$WIN_WS_NAME</span><span class="s2">"</span> | <span class="nb">grep</span> <span class="nt">-qi</span> <span class="s2">"special"</span><span class="p">;</span> <span class="k">then
  </span><span class="nv">OLD_WS</span><span class="o">=</span><span class="s2">"</span><span class="nv">$CUR_WS</span><span class="s2">"</span>
  <span class="o">[</span> <span class="nt">-f</span> <span class="s2">"</span><span class="nv">$STATE_FILE</span><span class="s2">"</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nv">OLD_WS</span><span class="o">=</span><span class="si">$(</span><span class="nb">cat</span> <span class="s2">"</span><span class="nv">$STATE_FILE</span><span class="s2">"</span><span class="si">)</span>

  hyprctl dispatch movetoworkspacesilent <span class="s2">"</span><span class="k">${</span><span class="nv">OLD_WS</span><span class="k">}</span><span class="s2">,address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span> <span class="o">||</span> <span class="se">\</span>
    hyprctl dispatch movetoworkspace <span class="s2">"</span><span class="k">${</span><span class="nv">OLD_WS</span><span class="k">}</span><span class="s2">,address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span>

  hyprctl dispatch workspace <span class="s2">"</span><span class="nv">$OLD_WS</span><span class="s2">"</span>
  hyprctl dispatch focuswindow <span class="s2">"address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span>
  <span class="nb">rm</span> <span class="nt">-f</span> <span class="s2">"</span><span class="nv">$STATE_FILE</span><span class="s2">"</span>
  <span class="nb">exit </span>0
<span class="k">fi</span>

<span class="c"># å¦åˆ™ï¼šçª—å£åœ¨åˆ«çš„ workspace -&gt; åˆ‡è¿‡å»å¹¶èšç„¦</span>
hyprctl dispatch workspace <span class="s2">"</span><span class="nv">$WIN_WS</span><span class="s2">"</span>
hyprctl dispatch focuswindow <span class="s2">"address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">exit </span>0

</code></pre></div></div> <h3 id="ä½¿ç”¨æ–¹æ³•-1">ä½¿ç”¨æ–¹æ³•</h3> <ol> <li>ä¿å­˜å¹¶èµ‹æƒï¼š <div class="language-shell highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nb">chmod</span> +x ~/scripts/toggle-app.sh
</code></pre></div> </div> </li> <li>Hyprland é…ç½®é‡ŒåŠ ç»‘å®šï¼Œä¾‹å¦‚å¾®ä¿¡ï¼š <div class="language-shell highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nb">bind</span> <span class="o">=</span> SUPER, W, <span class="nb">exec</span>, ~/scripts/toggle-app.sh wechat
</code></pre></div> </div> </li> </ol> <p>ï¼ˆ<code class="language-plaintext highlighter-rouge">wechat</code> è¦å’Œ <code class="language-plaintext highlighter-rouge">hyprctl clients -j</code> é‡Œ <code class="language-plaintext highlighter-rouge">.class</code> åä¸€è‡´ï¼Œæ¯”å¦‚ <code class="language-plaintext highlighter-rouge">WeChat.exe</code>ï¼Œå¯ä»¥è°ƒä¸€ä¸‹ï¼‰</p> <p>è¿™æ ·å°±æ˜¯ä¸€ä¸ªå¹²å‡€çš„ã€Œä¸€é”®éšè—/æ¢å¤/å¯åŠ¨ã€è„šæœ¬äº†ã€‚</p> <p>è¦ä¸è¦æˆ‘å†å¸®ä½ å†™ä¸€ä¸ª <strong>é€šç”¨ç‰ˆæœ¬</strong>ï¼Œæ”¯æŒå¤šä¸ª appï¼ˆæ¯”å¦‚ SUPER+F æ‰“å¼€/éšè— Firefoxï¼ŒSUPER+T æ‰“å¼€/éšè— Telegramï¼‰ï¼Œåªç”¨ä¸€ä¸ªè„šæœ¬å°±å¤Ÿï¼Ÿ</p> <p>å¥½çš„</p> <p>+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>		ç‰ˆæœ¬1 
		èŠå¤©çª—å£å›ºå®šåœ¨ä¸€ä¸ªworkspace åœ¨å…¶ä»–WorkspaceæŒ‰å¿«æ·é”®å›åˆ°è¿™ä¸ªworkspace
</code></pre></div></div> <p>+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</p> <p>ğŸ‘Œ é‚£æˆ‘ç»™ä½ æ•´ç†ä¸€ä¸ª <strong>é€šç”¨å¤šåº”ç”¨ç‰ˆæœ¬</strong>ï¼Œåªç”¨ä¸€ä¸ªè„šæœ¬å°±èƒ½ç®¡ç†å¤šä¸ªåº”ç”¨çš„ã€Œå¯åŠ¨ â†’ éšè— â†’ æ¢å¤ã€é€»è¾‘ã€‚</p> <p>è„šæœ¬ï¼š<code class="language-plaintext highlighter-rouge">~/scripts/toggle-app.sh</code></p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/usr/bin/env bash</span>
<span class="nb">set</span> <span class="nt">-euo</span> pipefail

<span class="nv">STATE_DIR</span><span class="o">=</span><span class="s2">"/tmp/hypr_toggle_states"</span>
<span class="nb">mkdir</span> <span class="nt">-p</span> <span class="s2">"</span><span class="nv">$STATE_DIR</span><span class="s2">"</span>

<span class="nv">APP</span><span class="o">=</span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span>   <span class="c"># ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åº”ç”¨åï¼Œæ¯”å¦‚ wechat/firefox/telegram</span>
<span class="nv">CMD</span><span class="o">=</span><span class="s2">"</span><span class="nv">$2</span><span class="s2">"</span>   <span class="c"># ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯åŠ¨å‘½ä»¤ï¼Œæ¯”å¦‚ wechat/firefox/telegram-desktop</span>

<span class="c"># æ‰¾çª—å£</span>
<span class="nv">WIN_JSON</span><span class="o">=</span><span class="si">$(</span>hyprctl clients <span class="nt">-j</span><span class="si">)</span>
<span class="nv">ADDR</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$WIN_JSON</span><span class="s2">"</span> | jq <span class="nt">-r</span> <span class="nt">--arg</span> app <span class="s2">"</span><span class="nv">$APP</span><span class="s2">"</span> <span class="s1">'
  .[] | select((.class // "" | ascii_downcase) == ($app|ascii_downcase)) | .address'</span> | <span class="nb">head</span> <span class="nt">-n1</span><span class="si">)</span>

<span class="k">if</span> <span class="o">[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$ADDR</span><span class="s2">"</span> <span class="o">]</span> <span class="o">||</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$ADDR</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"null"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
  <span class="c"># æ²¡æ‰¾åˆ°çª—å£å°±å¯åŠ¨</span>
  <span class="nb">eval</span> <span class="s2">"</span><span class="nv">$CMD</span><span class="s2"> &amp; disown"</span>
  <span class="nb">exit </span>0
<span class="k">fi

</span><span class="nv">WIN_WS</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$WIN_JSON</span><span class="s2">"</span> | jq <span class="nt">-r</span> <span class="nt">--arg</span> addr <span class="s2">"</span><span class="nv">$ADDR</span><span class="s2">"</span> <span class="s1">'.[] | select(.address==$addr) | .workspace.id'</span><span class="si">)</span>
<span class="nv">CUR_WS</span><span class="o">=</span><span class="si">$(</span>hyprctl activeworkspace <span class="nt">-j</span> | jq <span class="nt">-r</span> .id<span class="si">)</span>
<span class="nv">STATE_FILE</span><span class="o">=</span><span class="s2">"</span><span class="nv">$STATE_DIR</span><span class="s2">/</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">.state"</span>

<span class="c"># Helper: ç¡®è®¤çª—å£åœ¨å“ªä¸ª workspace</span>
where_is<span class="o">()</span> <span class="o">{</span>
  hyprctl clients <span class="nt">-j</span> | jq <span class="nt">-r</span> <span class="nt">--arg</span> addr <span class="s2">"</span><span class="nv">$ADDR</span><span class="s2">"</span> <span class="s1">'.[] | select(.address==$addr) | (.workspace.id // "-1")'</span>
<span class="o">}</span>

<span class="c"># å¦‚æœçª—å£åœ¨å½“å‰ workspace -&gt; éšè—</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$WIN_WS</span><span class="s2">"</span> <span class="nt">-eq</span> <span class="s2">"</span><span class="nv">$CUR_WS</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
  </span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$CUR_WS</span><span class="s2">"</span> <span class="o">&gt;</span> <span class="s2">"</span><span class="nv">$STATE_FILE</span><span class="s2">"</span>

  <span class="k">if </span>hyprctl dispatch movetoworkspacesilent <span class="s2">"special,address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span> <span class="o">&gt;</span>/dev/null 2&gt;&amp;1<span class="p">;</span> <span class="k">then
    </span><span class="nb">exit </span>0
  <span class="k">fi

  </span>hyprctl dispatch movetoworkspace <span class="s2">"special,address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span>
  hyprctl dispatch workspace <span class="s2">"</span><span class="nv">$CUR_WS</span><span class="s2">"</span>
  <span class="nb">exit </span>0
<span class="k">fi</span>

<span class="c"># å¦‚æœçª—å£åœ¨ special -&gt; æ¢å¤</span>
<span class="nv">WIN_WS_NAME</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$WIN_JSON</span><span class="s2">"</span> | jq <span class="nt">-r</span> <span class="nt">--arg</span> addr <span class="s2">"</span><span class="nv">$ADDR</span><span class="s2">"</span> <span class="s1">'.[] | select(.address==$addr) | (.workspace.name // "")'</span><span class="si">)</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$WIN_WS</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"-1"</span> <span class="o">]</span> <span class="o">||</span> <span class="nb">echo</span> <span class="s2">"</span><span class="nv">$WIN_WS_NAME</span><span class="s2">"</span> | <span class="nb">grep</span> <span class="nt">-qi</span> <span class="s2">"special"</span><span class="p">;</span> <span class="k">then
  </span><span class="nv">OLD_WS</span><span class="o">=</span><span class="s2">"</span><span class="nv">$CUR_WS</span><span class="s2">"</span>
  <span class="o">[</span> <span class="nt">-f</span> <span class="s2">"</span><span class="nv">$STATE_FILE</span><span class="s2">"</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nv">OLD_WS</span><span class="o">=</span><span class="si">$(</span><span class="nb">cat</span> <span class="s2">"</span><span class="nv">$STATE_FILE</span><span class="s2">"</span><span class="si">)</span>

  hyprctl dispatch movetoworkspacesilent <span class="s2">"</span><span class="k">${</span><span class="nv">OLD_WS</span><span class="k">}</span><span class="s2">,address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span> <span class="o">||</span> <span class="se">\</span>
    hyprctl dispatch movetoworkspace <span class="s2">"</span><span class="k">${</span><span class="nv">OLD_WS</span><span class="k">}</span><span class="s2">,address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span>

  hyprctl dispatch workspace <span class="s2">"</span><span class="nv">$OLD_WS</span><span class="s2">"</span>
  hyprctl dispatch focuswindow <span class="s2">"address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span>
  <span class="nb">rm</span> <span class="nt">-f</span> <span class="s2">"</span><span class="nv">$STATE_FILE</span><span class="s2">"</span>
  <span class="nb">exit </span>0
<span class="k">fi</span>

<span class="c"># çª—å£åœ¨åˆ«çš„ workspace -&gt; åˆ‡è¿‡å»å¹¶èšç„¦</span>
hyprctl dispatch workspace <span class="s2">"</span><span class="nv">$WIN_WS</span><span class="s2">"</span>
hyprctl dispatch focuswindow <span class="s2">"address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">exit </span>0

</code></pre></div></div> <h2 id="ç”¨æ³•ç¤ºä¾‹">ç”¨æ³•ç¤ºä¾‹</h2> <p>å‡è®¾ä½ è¦ç»™å¾®ä¿¡ / Firefox / Telegram è®¾ç½®å¿«æ·é”®ï¼š</p> <h3 id="hyprland-é…ç½®">Hyprland é…ç½®</h3> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># SUPER+W -&gt; å¾®ä¿¡</span>
<span class="nb">bind</span> <span class="o">=</span> SUPER, W, <span class="nb">exec</span>, ~/scripts/toggle-app.sh wechat <span class="s2">"wechat"</span>

<span class="c"># SUPER+F -&gt; Firefox</span>
<span class="nb">bind</span> <span class="o">=</span> SUPER, F, <span class="nb">exec</span>, ~/scripts/toggle-app.sh firefox <span class="s2">"firefox"</span>

<span class="c"># SUPER+T -&gt; Telegram</span>
<span class="nb">bind</span> <span class="o">=</span> SUPER, T, <span class="nb">exec</span>, ~/scripts/toggle-app.sh telegram <span class="s2">"telegram-desktop"</span>

</code></pre></div></div> <h2 id="è¯´æ˜">è¯´æ˜</h2> <ul> <li> <p>ç¬¬ä¸€ä¸ªå‚æ•° <code class="language-plaintext highlighter-rouge">$1</code> ç”¨æ¥åŒ¹é…çª—å£çš„ <strong>class å</strong>ï¼ˆé€šè¿‡ <code class="language-plaintext highlighter-rouge">hyprctl clients -j | jq '.[].class'</code> æŸ¥çœ‹å®é™…å€¼ï¼‰ã€‚</p> </li> <li> <p>ç¬¬äºŒä¸ªå‚æ•° <code class="language-plaintext highlighter-rouge">$2</code> æ˜¯åº”ç”¨çš„å¯åŠ¨å‘½ä»¤ã€‚</p> </li> <li> <p>è¿™æ ·ä¸€ä¸ªè„šæœ¬å°±èƒ½ç®¡ç†å¤šä¸ªåº”ç”¨ï¼Œé…ç½®æ–‡ä»¶é‡Œåªéœ€è¦ä¼ ä¸åŒå‚æ•°å³å¯ã€‚</p> </li> <li> <p>å¦‚æœä½ æœ‰ Wine/Deepin çš„å¾®ä¿¡ï¼Œå¯ä»¥å†™æˆï¼š</p> <div class="language-shell highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nb">bind</span> <span class="o">=</span> SUPER, W, <span class="nb">exec</span>, ~/scripts/toggle-app.sh wechat <span class="s2">"/opt/deepinwine/apps/Deepin-WeChat/wechat"</span>
</code></pre></div> </div> </li> </ul> <p>++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</p> <p>è¦ä¸è¦æˆ‘å¸®ä½ å†™ä¸€ä¸ª <strong>è‡ªåŠ¨é…ç½®æ£€æµ‹å·¥å…·</strong>ï¼Œæ¯”å¦‚è¾“å…¥åº”ç”¨åå°±èƒ½è¾“å‡ºå®ƒçš„ class å’Œä½ éœ€è¦å†™åœ¨ç»‘å®šé‡Œçš„å‘½ä»¤ï¼Ÿè¿™æ ·å¯ä»¥å¿«é€Ÿè°ƒè¯•å¾®ä¿¡è¿™ç§ç‰¹æ®Šçš„ Wine åº”ç”¨ã€‚</p> <p>å¥½çš„</p> <p>ğŸ‘Œ é‚£æˆ‘å¸®ä½ å†™ä¸€ä¸ª <strong>è‡ªåŠ¨æ£€æµ‹å·¥å…·</strong>ï¼Œå¯ä»¥å¿«é€Ÿæ‰¾å‡ºæŸä¸ªåº”ç”¨çª—å£çš„ <code class="language-plaintext highlighter-rouge">class</code> å’Œå¯åŠ¨å‘½ä»¤ï¼Œæ–¹ä¾¿é…ç½®åˆ°è„šæœ¬é‡Œã€‚</p> <p>è„šæœ¬ï¼š<code class="language-plaintext highlighter-rouge">~/scripts/find-app-class.sh</code></p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/usr/bin/env bash</span>
<span class="nb">set</span> <span class="nt">-euo</span> pipefail

<span class="nv">APP</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">1</span><span class="k">:-}</span><span class="s2">"</span>

<span class="k">if</span> <span class="o">[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$APP</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
  </span><span class="nb">echo</span> <span class="s2">"ç”¨æ³•: </span><span class="nv">$0</span><span class="s2"> &lt;å…³é”®å­—&gt;"</span>
  <span class="nb">echo</span> <span class="s2">"ä¾‹å¦‚: </span><span class="nv">$0</span><span class="s2"> wechat"</span>
  <span class="nb">exit </span>1
<span class="k">fi

</span><span class="nb">echo</span> <span class="s2">"æ­£åœ¨æŸ¥æ‰¾åŒ…å« '</span><span class="nv">$APP</span><span class="s2">' çš„çª—å£..."</span>

hyprctl clients <span class="nt">-j</span> | jq <span class="nt">-r</span> <span class="nt">--arg</span> app <span class="s2">"</span><span class="nv">$APP</span><span class="s2">"</span> <span class="s1">'
  .[]
  | select(
      (.class // "" | ascii_downcase | contains($app|ascii_downcase))
      or
      (.title // "" | ascii_downcase | contains($app|ascii_downcase))
    )
  | "class=\(.class)  title=\(.title)  address=\(.address)  ws=\(.workspace.id)"'</span>

</code></pre></div></div> <h2 id="ç”¨æ³•">ç”¨æ³•</h2> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">chmod</span> +x ~/scripts/find-app-class.sh
~/scripts/find-app-class.sh wechat

</code></pre></div></div> <p>è¾“å‡ºç¤ºä¾‹ï¼ˆä¸åŒåº”ç”¨ä¼šä¸ä¸€æ ·ï¼‰ï¼š</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">class</span><span class="o">=</span>WeChat.exe  <span class="nv">title</span><span class="o">=</span>å¾®ä¿¡  <span class="nv">address</span><span class="o">=</span>0x55a6f3b  <span class="nv">ws</span><span class="o">=</span>2

</code></pre></div></div> <p>è¿™æ ·ä½ å°±çŸ¥é“ï¼š</p> <ul> <li> <p><code class="language-plaintext highlighter-rouge">class</code> æ˜¯ <code class="language-plaintext highlighter-rouge">WeChat.exe</code>ï¼Œé‚£ä¹ˆåœ¨ <code class="language-plaintext highlighter-rouge">toggle-app.sh</code> é‡Œä¼ å‚è¦å†™ <code class="language-plaintext highlighter-rouge">WeChat.exe</code>ï¼ˆå¤§å°å†™æ•æ„Ÿï¼ï¼‰ã€‚</p> </li> <li> <p>å¯åŠ¨å‘½ä»¤åˆ™æ˜¯ä½ å¹³æ—¶è¿è¡Œå¾®ä¿¡çš„å‘½ä»¤ï¼Œæ¯”å¦‚ <code class="language-plaintext highlighter-rouge">/opt/deepinwine/apps/Deepin-WeChat/wechat</code>ã€‚</p> </li> </ul> <h2 id="é…ç½®-hyprland-ç»‘å®š">é…ç½® Hyprland ç»‘å®š</h2> <p>æ‹¿åˆ°ç»“æœåï¼Œæ¯”å¦‚ä½ å‘ç°å¾®ä¿¡çš„ class æ˜¯ <code class="language-plaintext highlighter-rouge">WeChat.exe</code>ï¼Œå°±å†™ï¼š</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">bind</span> <span class="o">=</span> SUPER, W, <span class="nb">exec</span>, ~/scripts/toggle-app.sh WeChat.exe <span class="s2">"/opt/deepinwine/apps/Deepin-WeChat/wechat"</span>

</code></pre></div></div> <p>è¿™æ ·è„šæœ¬æ‰èƒ½æ­£ç¡®åŒ¹é…çª—å£ã€‚</p> <p>++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</p> <p>ç‰ˆæœ¬2çš„éœ€æ±‚ ç”¨æ³•å¯ä»¥ä½¿ç”¨å‚è€ƒ1 å¿«æ·é”®è°ƒç”¨æ—¶ï¼Œä¼ è¿ä¸ªå‚æ•°</p> <p>++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</p> <p>æˆ‘æƒ³åœ¨ä¸€ä¸ªworkspace æŒ‰å¯¹åº”å¿«æ·é”®æ—¶ wechatçª—å£å°±å‡ºç°åœ¨å¯¹åº”çš„workspace è€Œä¸æ˜¯ä¸€ç›´å‡ºç°åœ¨é‚£ä¸ªåˆå§‹çš„workspace</p> <p>æ˜ç™½ âœ…<br> ä½ ç°åœ¨æƒ³è¦çš„é€»è¾‘æ˜¯ï¼š</p> <ul> <li> <p>æ¯ä¸ª workspace ä¸ŠæŒ‰å¿«æ·é”® â†’ å¾®ä¿¡çª—å£ã€Œç¬ç§»ã€åˆ°è¿™ä¸ª workspaceï¼ˆè€Œä¸æ˜¯æ€»æ˜¯å›åˆ°å®ƒæœ€åˆå¯åŠ¨çš„ workspaceï¼‰ã€‚</p> </li> <li> <p>è¿™æ ·ä½ å¯ä»¥åœ¨ <strong>ä»»æ„ workspace</strong> ä¸Šã€Œå¬å”¤ã€å¾®ä¿¡ï¼Œå®ƒå°±ä¼šå‡ºç°åœ¨ä½ å½“å‰æ‰€åœ¨çš„ workspaceã€‚</p> </li> </ul> <h2 id="æ€è·¯">æ€è·¯</h2> <p>æ ¸å¿ƒæ˜¯æŠŠã€Œæ¢å¤é€»è¾‘ã€æ”¹æ‰ï¼š</p> <ul> <li> <p>ä»¥å‰æˆ‘ä»¬ä¿å­˜äº† <strong>æœ€åˆ workspace</strong> å¹¶æŠŠçª—å£æ¢å¤åˆ°é‚£é‡Œã€‚</p> </li> <li> <p>ç°åœ¨è¦æ”¹æˆï¼š<strong>æ¢å¤æ—¶æ€»æ˜¯ç§»åŠ¨åˆ°å½“å‰ workspace</strong>ï¼ˆä¹Ÿå°±æ˜¯ä½ æŒ‰å¿«æ·é”®çš„ workspaceï¼‰ã€‚</p> </li> </ul> <h2 id="ä¿®æ”¹ç‰ˆè„šæœ¬å…³é”®å˜åŒ–">ä¿®æ”¹ç‰ˆè„šæœ¬ï¼ˆå…³é”®å˜åŒ–ï¼‰</h2> <p><code class="language-plaintext highlighter-rouge">~/scripts/toggle-app.sh</code></p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/usr/bin/env bash</span>
<span class="nb">set</span> <span class="nt">-euo</span> pipefail

<span class="nv">STATE_DIR</span><span class="o">=</span><span class="s2">"/tmp/hypr_toggle_states"</span>
<span class="nb">mkdir</span> <span class="nt">-p</span> <span class="s2">"</span><span class="nv">$STATE_DIR</span><span class="s2">"</span>

<span class="nv">APP</span><span class="o">=</span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span>
<span class="nv">CMD</span><span class="o">=</span><span class="s2">"</span><span class="nv">$2</span><span class="s2">"</span>

<span class="nv">WIN_JSON</span><span class="o">=</span><span class="si">$(</span>hyprctl clients <span class="nt">-j</span><span class="si">)</span>
<span class="nv">ADDR</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$WIN_JSON</span><span class="s2">"</span> | jq <span class="nt">-r</span> <span class="nt">--arg</span> app <span class="s2">"</span><span class="nv">$APP</span><span class="s2">"</span> <span class="s1">'
  .[] | select((.class // "" | ascii_downcase) == ($app|ascii_downcase)) | .address'</span> | <span class="nb">head</span> <span class="nt">-n1</span><span class="si">)</span>

<span class="k">if</span> <span class="o">[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$ADDR</span><span class="s2">"</span> <span class="o">]</span> <span class="o">||</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$ADDR</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"null"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
  </span><span class="nb">eval</span> <span class="s2">"</span><span class="nv">$CMD</span><span class="s2"> &amp; disown"</span>
  <span class="nb">exit </span>0
<span class="k">fi

</span><span class="nv">WIN_WS</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$WIN_JSON</span><span class="s2">"</span> | jq <span class="nt">-r</span> <span class="nt">--arg</span> addr <span class="s2">"</span><span class="nv">$ADDR</span><span class="s2">"</span> <span class="s1">'.[] | select(.address==$addr) | .workspace.id'</span><span class="si">)</span>
<span class="nv">CUR_WS</span><span class="o">=</span><span class="si">$(</span>hyprctl activeworkspace <span class="nt">-j</span> | jq <span class="nt">-r</span> .id<span class="si">)</span>
<span class="nv">STATE_FILE</span><span class="o">=</span><span class="s2">"</span><span class="nv">$STATE_DIR</span><span class="s2">/</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">.state"</span>

<span class="c"># å¦‚æœçª—å£åœ¨å½“å‰ workspace â†’ éšè—</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$WIN_WS</span><span class="s2">"</span> <span class="nt">-eq</span> <span class="s2">"</span><span class="nv">$CUR_WS</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
  </span><span class="nb">echo</span> <span class="s2">"hidden"</span> <span class="o">&gt;</span> <span class="s2">"</span><span class="nv">$STATE_FILE</span><span class="s2">"</span>
  hyprctl dispatch movetoworkspacesilent <span class="s2">"special,address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span> <span class="o">||</span> <span class="se">\</span>
    <span class="o">{</span> hyprctl dispatch movetoworkspace <span class="s2">"special,address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span><span class="p">;</span> hyprctl dispatch workspace <span class="s2">"</span><span class="nv">$CUR_WS</span><span class="s2">"</span><span class="p">;</span> <span class="o">}</span>
  <span class="nb">exit </span>0
<span class="k">fi</span>

<span class="c"># å¦‚æœçª—å£åœ¨ special â†’ æ¢å¤åˆ° **å½“å‰ workspace**</span>
<span class="nv">WIN_WS_NAME</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$WIN_JSON</span><span class="s2">"</span> | jq <span class="nt">-r</span> <span class="nt">--arg</span> addr <span class="s2">"</span><span class="nv">$ADDR</span><span class="s2">"</span> <span class="s1">'.[] | select(.address==$addr) | (.workspace.name // "")'</span><span class="si">)</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$WIN_WS</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"-1"</span> <span class="o">]</span> <span class="o">||</span> <span class="nb">echo</span> <span class="s2">"</span><span class="nv">$WIN_WS_NAME</span><span class="s2">"</span> | <span class="nb">grep</span> <span class="nt">-qi</span> <span class="s2">"special"</span><span class="p">;</span> <span class="k">then
  </span>hyprctl dispatch movetoworkspacesilent <span class="s2">"</span><span class="k">${</span><span class="nv">CUR_WS</span><span class="k">}</span><span class="s2">,address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span> <span class="o">||</span> <span class="se">\</span>
    hyprctl dispatch movetoworkspace <span class="s2">"</span><span class="k">${</span><span class="nv">CUR_WS</span><span class="k">}</span><span class="s2">,address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span>

  hyprctl dispatch focuswindow <span class="s2">"address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span>
  <span class="nb">rm</span> <span class="nt">-f</span> <span class="s2">"</span><span class="nv">$STATE_FILE</span><span class="s2">"</span>
  <span class="nb">exit </span>0
<span class="k">fi</span>

<span class="c"># å¦‚æœçª—å£åœ¨å…¶ä»– workspace â†’ ç§»åŠ¨åˆ° **å½“å‰ workspace**</span>
hyprctl dispatch movetoworkspacesilent <span class="s2">"</span><span class="k">${</span><span class="nv">CUR_WS</span><span class="k">}</span><span class="s2">,address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span> <span class="o">||</span> <span class="se">\</span>
  hyprctl dispatch movetoworkspace <span class="s2">"</span><span class="k">${</span><span class="nv">CUR_WS</span><span class="k">}</span><span class="s2">,address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span>

hyprctl dispatch focuswindow <span class="s2">"address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span>

</code></pre></div></div> <h2 id="ä½¿ç”¨æ–¹å¼">ä½¿ç”¨æ–¹å¼</h2> <p>è¿˜æ˜¯å’Œä¹‹å‰ä¸€æ ·ï¼š</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">bind</span> <span class="o">=</span> SUPER, W, <span class="nb">exec</span>, ~/scripts/toggle-app.sh WeChat.exe <span class="s2">"/opt/deepinwine/apps/Deepin-WeChat/wechat"</span>

</code></pre></div></div> <p>æ•ˆæœå°±æ˜¯ï¼š</p> <ul> <li> <p>åœ¨ä»»æ„ workspace æŒ‰ä¸‹å¿«æ·é”®ï¼Œ</p> <ul> <li> <p>å¦‚æœå¾®ä¿¡åœ¨å‰å° â†’ éšè—åˆ° special</p> </li> <li> <p>å¦‚æœå¾®ä¿¡è¢«éšè— â†’ æ¢å¤åˆ°ã€Œå½“å‰ workspaceã€</p> </li> <li> <p>å¦‚æœå¾®ä¿¡åœ¨åˆ«çš„ workspace â†’ æŠŠå®ƒç§»åˆ°ã€Œå½“å‰ workspaceã€</p> </li> </ul> </li> </ul> <p>++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>		                 ç‰ˆæœ¬ 2
	èŠå¤©çª—å£ä¸å›ºå®šåœ¨ä¸€ä¸ªworkspace 
	åœ¨å…¶ä»–WorkspaceæŒ‰å¿«æ·é”® èŠå¤©çª—å£ ä¼šåœ¨å¯¹åº”çš„workspaceå‡ºç°
</code></pre></div></div> <p>++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</p> <p>å¦‚æœæ˜¯éšè—çš„çŠ¶æ€ æŒ‰å¿«æ·é”® ä¹Ÿè¦å‡ºç°åœ¨å½“å‰workspace è€Œä¸æ˜¯ä¹‹å‰çš„workspace</p> <p>å¯¹çš„ ğŸ‘ ä½ è¦çš„é€»è¾‘æ˜¯ï¼š</p> <ul> <li> <p><strong>éšè—æ—¶</strong> â†’ æ”¾åˆ° <code class="language-plaintext highlighter-rouge">special</code></p> </li> <li> <p><strong>å†æŒ‰å¿«æ·é”®æ¢å¤æ—¶</strong> â†’ æ°¸è¿œå›åˆ°ã€Œå½“å‰ workspaceã€è€Œä¸æ˜¯ä¹‹å‰å¯åŠ¨çš„é‚£ä¸ª</p> </li> </ul> <p>ä¸Šæ¬¡è„šæœ¬é‡Œå·²ç»éƒ¨åˆ†æ”¹äº†ï¼Œä½†æ¢å¤æ—¶æˆ‘è¿˜ä¿ç•™äº†æ£€æŸ¥ <code class="language-plaintext highlighter-rouge">WIN_WS_NAME</code> çš„é€»è¾‘ï¼ˆå¯èƒ½å¯¼è‡´å›åˆ°æ—§ workspaceï¼‰ã€‚<br> å’±ä»¬ç›´æ¥å½»åº•æ”¹æ‰ï¼šåªè¦åœ¨ <code class="language-plaintext highlighter-rouge">special</code> â†’ ä¸€å¾‹ç§»åˆ° <strong>å½“å‰ workspace</strong>ã€‚</p> <h3 id="è„šæœ¬æ›´æ–°ç‰ˆ">è„šæœ¬æ›´æ–°ç‰ˆ</h3> <p><code class="language-plaintext highlighter-rouge">~/scripts/toggle-app.sh</code></p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/usr/bin/env bash</span>
<span class="nb">set</span> <span class="nt">-euo</span> pipefail

<span class="nv">APP</span><span class="o">=</span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span>
<span class="nv">CMD</span><span class="o">=</span><span class="s2">"</span><span class="nv">$2</span><span class="s2">"</span>

<span class="nv">WIN_JSON</span><span class="o">=</span><span class="si">$(</span>hyprctl clients <span class="nt">-j</span><span class="si">)</span>
<span class="nv">ADDR</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$WIN_JSON</span><span class="s2">"</span> | jq <span class="nt">-r</span> <span class="nt">--arg</span> app <span class="s2">"</span><span class="nv">$APP</span><span class="s2">"</span> <span class="s1">'
  .[] | select((.class // "" | ascii_downcase) == ($app|ascii_downcase)) | .address'</span> | <span class="nb">head</span> <span class="nt">-n1</span><span class="si">)</span>

<span class="k">if</span> <span class="o">[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$ADDR</span><span class="s2">"</span> <span class="o">]</span> <span class="o">||</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$ADDR</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"null"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
  <span class="c"># æ²¡æœ‰è¿è¡Œ â†’ å¯åŠ¨</span>
  <span class="nb">eval</span> <span class="s2">"</span><span class="nv">$CMD</span><span class="s2"> &amp; disown"</span>
  <span class="nb">exit </span>0
<span class="k">fi

</span><span class="nv">WIN_WS</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$WIN_JSON</span><span class="s2">"</span> | jq <span class="nt">-r</span> <span class="nt">--arg</span> addr <span class="s2">"</span><span class="nv">$ADDR</span><span class="s2">"</span> <span class="s1">'.[] | select(.address==$addr) | .workspace.id'</span><span class="si">)</span>
<span class="nv">CUR_WS</span><span class="o">=</span><span class="si">$(</span>hyprctl activeworkspace <span class="nt">-j</span> | jq <span class="nt">-r</span> .id<span class="si">)</span>

<span class="c"># æƒ…å†µ 1: åœ¨å½“å‰ workspace â†’ éšè—åˆ° special</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$WIN_WS</span><span class="s2">"</span> <span class="nt">-eq</span> <span class="s2">"</span><span class="nv">$CUR_WS</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
  </span>hyprctl dispatch movetoworkspacesilent <span class="s2">"special,address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span> <span class="o">||</span> <span class="se">\</span>
    <span class="o">{</span> hyprctl dispatch movetoworkspace <span class="s2">"special,address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span><span class="p">;</span> hyprctl dispatch workspace <span class="s2">"</span><span class="nv">$CUR_WS</span><span class="s2">"</span><span class="p">;</span> <span class="o">}</span>
  <span class="nb">exit </span>0
<span class="k">fi</span>

<span class="c"># æƒ…å†µ 2: åœ¨ special â†’ æ¢å¤åˆ°å½“å‰ workspace</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$WIN_WS</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"-1"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
  </span>hyprctl dispatch movetoworkspacesilent <span class="s2">"</span><span class="k">${</span><span class="nv">CUR_WS</span><span class="k">}</span><span class="s2">,address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span> <span class="o">||</span> <span class="se">\</span>
    hyprctl dispatch movetoworkspace <span class="s2">"</span><span class="k">${</span><span class="nv">CUR_WS</span><span class="k">}</span><span class="s2">,address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span>
  hyprctl dispatch focuswindow <span class="s2">"address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span>
  <span class="nb">exit </span>0
<span class="k">fi</span>

<span class="c"># æƒ…å†µ 3: åœ¨åˆ«çš„ workspace â†’ ç›´æ¥æ‹‰åˆ°å½“å‰ workspace</span>
hyprctl dispatch movetoworkspacesilent <span class="s2">"</span><span class="k">${</span><span class="nv">CUR_WS</span><span class="k">}</span><span class="s2">,address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span> <span class="o">||</span> <span class="se">\</span>
  hyprctl dispatch movetoworkspace <span class="s2">"</span><span class="k">${</span><span class="nv">CUR_WS</span><span class="k">}</span><span class="s2">,address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span>
hyprctl dispatch focuswindow <span class="s2">"address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span>

</code></pre></div></div> <h3 id="ç»‘å®šç¤ºä¾‹">ç»‘å®šç¤ºä¾‹</h3> <p><code class="language-plaintext highlighter-rouge">hyprland.conf</code>:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">bind</span> <span class="o">=</span> SUPER, W, <span class="nb">exec</span>, ~/scripts/toggle-app.sh WeChat.exe <span class="s2">"/opt/deepinwine/apps/Deepin-WeChat/wechat"</span>

</code></pre></div></div> <h3 id="æ•ˆæœ">æ•ˆæœ</h3> <ul> <li> <p><strong>åœ¨å½“å‰ workspace</strong> â†’ æŒ‰ä¸‹å¿«æ·é”® â†’ éšè—åˆ° <code class="language-plaintext highlighter-rouge">special</code></p> </li> <li> <p><strong>å†æŒ‰å¿«æ·é”®</strong> â†’ ä» <code class="language-plaintext highlighter-rouge">special</code> æ‹‰å›æ¥ â†’ <strong>å½“å‰ workspace</strong></p> </li> <li> <p><strong>åœ¨åˆ«çš„ workspace</strong> â†’ æŒ‰å¿«æ·é”® â†’ å¾®ä¿¡çª—å£ä¼šã€Œç¬ç§»ã€è¿‡æ¥</p> </li> </ul> <p>+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</p> <p>è¦ä¸è¦æˆ‘å¸®ä½ æ‰©å±•ä¸€ä¸‹ï¼ŒæŠŠ APP class å + å¯åŠ¨å‘½ä»¤ é…ç½®åˆ°ä¸€ä¸ªæ•°ç»„é‡Œï¼Œè¿™æ ·åŒä¸€ä¸ªè„šæœ¬å°±èƒ½ç®¡ç†å¤šä¸ªåº”ç”¨ï¼ˆæ¯”å¦‚å¾®ä¿¡ã€Telegramã€Slackã€QQï¼‰ï¼Ÿ</p> <p>å¥½çš„</p> <p>ğŸ‘Œ é‚£æˆ‘ä»¬åšä¸€ä¸ªã€Œå¤šåº”ç”¨é€šç”¨ç‰ˆã€çš„è„šæœ¬ï¼Œä½ åªéœ€è¦åœ¨æ•°ç»„é‡Œé…ç½®å¥½åº”ç”¨çš„ <strong>class åç§°</strong> å’Œ <strong>å¯åŠ¨å‘½ä»¤</strong>ï¼Œå°±èƒ½ç”¨åŒä¸€ä»½ <code class="language-plaintext highlighter-rouge">toggle-app.sh</code> æ¥æ§åˆ¶å¾®ä¿¡ã€Telegramã€Slackã€QQ ç­‰ã€‚</p> <hr> <h2 id="è„šæœ¬scriptstoggle-appsh">è„šæœ¬ï¼š<code class="language-plaintext highlighter-rouge">~/scripts/toggle-app.sh</code> </h2> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/usr/bin/env bash</span>
<span class="nb">set</span> <span class="nt">-euo</span> pipefail

<span class="c"># åœ¨è¿™é‡Œé…ç½®åº”ç”¨åˆ—è¡¨ï¼šclass åç§° =&gt; å¯åŠ¨å‘½ä»¤</span>
<span class="nb">declare</span> <span class="nt">-A</span> <span class="nv">apps</span><span class="o">=(</span>
  <span class="o">[</span><span class="s2">"WeChat.exe"</span><span class="o">]=</span><span class="s2">"/opt/deepinwine/apps/Deepin-WeChat/wechat"</span>
  <span class="o">[</span><span class="s2">"telegram-desktop"</span><span class="o">]=</span><span class="s2">"telegram-desktop"</span>
  <span class="o">[</span><span class="s2">"slack"</span><span class="o">]=</span><span class="s2">"slack"</span>
  <span class="o">[</span><span class="s2">"qq"</span><span class="o">]=</span><span class="s2">"qq"</span>
<span class="o">)</span>

<span class="nv">APP</span><span class="o">=</span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span>

<span class="k">if</span> <span class="o">[[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="k">${</span><span class="nv">apps</span><span class="p">[</span><span class="nv">$APP</span><span class="p">]+isset</span><span class="k">}</span><span class="s2">"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
  </span><span class="nb">echo</span> <span class="s2">"æœªçŸ¥åº”ç”¨: </span><span class="nv">$APP</span><span class="s2">"</span>
  <span class="nb">echo</span> <span class="s2">"å¯ç”¨: </span><span class="k">${</span><span class="p">!apps[@]</span><span class="k">}</span><span class="s2">"</span>
  <span class="nb">exit </span>1
<span class="k">fi

</span><span class="nv">CMD</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">apps</span><span class="p">[</span><span class="nv">$APP</span><span class="p">]</span><span class="k">}</span><span class="s2">"</span>

<span class="nv">WIN_JSON</span><span class="o">=</span><span class="si">$(</span>hyprctl clients <span class="nt">-j</span><span class="si">)</span>
<span class="nv">ADDR</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$WIN_JSON</span><span class="s2">"</span> | jq <span class="nt">-r</span> <span class="nt">--arg</span> app <span class="s2">"</span><span class="nv">$APP</span><span class="s2">"</span> <span class="s1">'
  .[] | select((.class // "" | ascii_downcase) == ($app|ascii_downcase)) | .address'</span> | <span class="nb">head</span> <span class="nt">-n1</span><span class="si">)</span>

<span class="k">if</span> <span class="o">[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$ADDR</span><span class="s2">"</span> <span class="o">]</span> <span class="o">||</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$ADDR</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"null"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
  <span class="c"># æ²¡æœ‰è¿è¡Œ â†’ å¯åŠ¨</span>
  <span class="nb">eval</span> <span class="s2">"</span><span class="nv">$CMD</span><span class="s2"> &amp; disown"</span>
  <span class="nb">exit </span>0
<span class="k">fi

</span><span class="nv">WIN_WS</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$WIN_JSON</span><span class="s2">"</span> | jq <span class="nt">-r</span> <span class="nt">--arg</span> addr <span class="s2">"</span><span class="nv">$ADDR</span><span class="s2">"</span> <span class="s1">'.[] | select(.address==$addr) | .workspace.id'</span><span class="si">)</span>
<span class="nv">CUR_WS</span><span class="o">=</span><span class="si">$(</span>hyprctl activeworkspace <span class="nt">-j</span> | jq <span class="nt">-r</span> .id<span class="si">)</span>

<span class="c"># æƒ…å†µ 1: åœ¨å½“å‰ workspace â†’ éšè—åˆ° special</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$WIN_WS</span><span class="s2">"</span> <span class="nt">-eq</span> <span class="s2">"</span><span class="nv">$CUR_WS</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
  </span>hyprctl dispatch movetoworkspacesilent <span class="s2">"special,address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span> <span class="o">||</span> <span class="se">\</span>
    <span class="o">{</span> hyprctl dispatch movetoworkspace <span class="s2">"special,address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span><span class="p">;</span> hyprctl dispatch workspace <span class="s2">"</span><span class="nv">$CUR_WS</span><span class="s2">"</span><span class="p">;</span> <span class="o">}</span>
  <span class="nb">exit </span>0
<span class="k">fi</span>

<span class="c"># æƒ…å†µ 2: åœ¨ special â†’ æ¢å¤åˆ°å½“å‰ workspace</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$WIN_WS</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"-1"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
  </span>hyprctl dispatch movetoworkspacesilent <span class="s2">"</span><span class="k">${</span><span class="nv">CUR_WS</span><span class="k">}</span><span class="s2">,address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span> <span class="o">||</span> <span class="se">\</span>
    hyprctl dispatch movetoworkspace <span class="s2">"</span><span class="k">${</span><span class="nv">CUR_WS</span><span class="k">}</span><span class="s2">,address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span>
  hyprctl dispatch focuswindow <span class="s2">"address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span>
  <span class="nb">exit </span>0
<span class="k">fi</span>

<span class="c"># æƒ…å†µ 3: åœ¨åˆ«çš„ workspace â†’ ç›´æ¥æ‹‰åˆ°å½“å‰ workspace</span>
hyprctl dispatch movetoworkspacesilent <span class="s2">"</span><span class="k">${</span><span class="nv">CUR_WS</span><span class="k">}</span><span class="s2">,address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span> <span class="o">||</span> <span class="se">\</span>
  hyprctl dispatch movetoworkspace <span class="s2">"</span><span class="k">${</span><span class="nv">CUR_WS</span><span class="k">}</span><span class="s2">,address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span>
hyprctl dispatch focuswindow <span class="s2">"address:</span><span class="k">${</span><span class="nv">ADDR</span><span class="k">}</span><span class="s2">"</span>
</code></pre></div></div> <hr> <h2 id="ä½¿ç”¨æ–¹å¼ç»‘å®šå¿«æ·é”®">ä½¿ç”¨æ–¹å¼ï¼ˆç»‘å®šå¿«æ·é”®ï¼‰</h2> <p>åœ¨ <code class="language-plaintext highlighter-rouge">hyprland.conf</code> é‡ŒåŠ ï¼š</p> <div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># å¾®ä¿¡
</span><span class="py">bind</span> <span class="p">=</span> <span class="s">SUPER, W, exec, ~/scripts/toggle-app.sh WeChat.exe</span>
<span class="c"># Telegram
</span><span class="py">bind</span> <span class="p">=</span> <span class="s">SUPER, T, exec, ~/scripts/toggle-app.sh telegram-desktop</span>
<span class="c"># Slack
</span><span class="py">bind</span> <span class="p">=</span> <span class="s">SUPER, S, exec, ~/scripts/toggle-app.sh slack</span>
<span class="c"># QQ
</span><span class="py">bind</span> <span class="p">=</span> <span class="s">SUPER, Q, exec, ~/scripts/toggle-app.sh qq</span>
</code></pre></div></div> <hr> <h2 id="æ•ˆæœ-1">æ•ˆæœ</h2> <ul> <li> <p>æŒ‰ä¸‹å¯¹åº”å¿«æ·é”®ï¼š</p> <ul> <li> <p>å¦‚æœåº”ç”¨æ²¡å¯åŠ¨ â†’ å¯åŠ¨</p> </li> <li> <p>å¦‚æœåœ¨å½“å‰ workspace â†’ éšè—åˆ° <code class="language-plaintext highlighter-rouge">special</code></p> </li> <li> <p>å¦‚æœåœ¨ <code class="language-plaintext highlighter-rouge">special</code> â†’ æ‹‰å› <strong>å½“å‰ workspace</strong></p> </li> <li> <p>å¦‚æœåœ¨åˆ«çš„ workspace â†’ æ‹‰åˆ° <strong>å½“å‰ workspace</strong></p> </li> </ul> </li> </ul> <hr> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="https://blog.google/technology/ai/google-gemini-update-flash-ai-assistant-io-2024/" target="_blank" rel="external nofollow noopener">Google Gemini updates: Flash 1.5, Gemma 2 and Project Astra</a> <svg width="1rem" height="1rem" viewbox="0 0 30 30" xmlns="http://www.w3.org/2000/svg"> <path d="M17 13.5v6H5v-12h6m3-3h6v6m0-6-9 9" class="icon_svg-stroke" stroke="#999" stroke-width="1.5" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path> </svg> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="https://medium.com/@al-folio/displaying-external-posts-on-your-al-folio-blog-b60a1d241a0a?source=rss-17feae71c3c4------2" target="_blank" rel="external nofollow noopener">Displaying External Posts on Your al-folio Blog</a> <svg width="1rem" height="1rem" viewbox="0 0 30 30" xmlns="http://www.w3.org/2000/svg"> <path d="M17 13.5v6H5v-12h6m3-3h6v6m0-6-9 9" class="icon_svg-stroke" stroke="#999" stroke-width="1.5" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path> </svg> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/Hyprlan%E5%BE%AE%E4%BF%A1%E9%80%9A%E7%9F%A5/">Hyprlanå¾®ä¿¡é€šçŸ¥</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/zero%E6%B5%8B%E8%AF%95/">Zeroæµ‹è¯•</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/plotly/">a post with plotly.js</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> Â© Copyright 2025 Kevin Feng. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>