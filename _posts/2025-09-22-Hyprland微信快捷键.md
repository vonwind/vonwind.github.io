








### 自动检测版脚本

保存为 `~/scripts/wechat-toggle.sh`：
```shell
#!/bin/bash

# 自动检测微信窗口 class
get_wechat_class() {
    hyprctl clients | grep -i "wechat" | grep "class:" | head -n1 | awk '{print $2}'
}

WIN_CLASS=$(get_wechat_class)

# 如果没有检测到，默认用 wechat
if [ -z "$WIN_CLASS" ]; then
    WIN_CLASS="wechat"
fi

# 检查微信是否运行
if ! pgrep -i wechat >/dev/null; then
    # 没有运行就启动
    wechat &
    exit 0
fi

# 微信在运行，检查窗口信息
WIN_INFO=$(hyprctl clients | grep -i "class: $WIN_CLASS" -A 10)

if [ -z "$WIN_INFO" ]; then
    # 没找到窗口（可能在后台），重新启动
    wechat &
    exit 0
fi

# 如果窗口已聚焦 → 最小化到一个隐藏 workspace
if echo "$WIN_INFO" | grep -q "focused: yes"; then
    hyprctl dispatch movetoworkspacesilent special:hidden "class:^(?i)$WIN_CLASS$"
else
    # 否则聚焦到它
    hyprctl dispatch focuswindow "class:^(?i)$WIN_CLASS$"
fi
```


### 使用方法

1. 给权限：
```shell
chmod +x ~/scripts/wechat-toggle.sh
```

2. 在 `~/.config/hypr/hyprland.conf` 里添加：
```shell
bind = SUPER, W, exec, ~/scripts/wechat-toggle.sh
```


这样效果就是：

- `SUPER + W`
    
    - 如果微信没开 → 启动微信
        
    - 如果微信在后台 → 切换到前台
        
    - 如果微信已在前台 → 隐藏到一个 `special:hidden` 的 workspace




